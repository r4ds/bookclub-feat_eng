<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2.3 Example 2 | Feature Engineering and Selection Book Club</title>
  <meta name="description" content="This is the product of the R4DS Online Learning Community’s Feature Engineering and Selection Book Club." />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="2.3 Example 2 | Feature Engineering and Selection Book Club" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is the product of the R4DS Online Learning Community’s Feature Engineering and Selection Book Club." />
  <meta name="github-repo" content="r4ds/bookclub-feat_eng" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2.3 Example 2 | Feature Engineering and Selection Book Club" />
  
  <meta name="twitter:description" content="This is the product of the R4DS Online Learning Community’s Feature Engineering and Selection Book Club." />
  

<meta name="author" content="The R4DS Online Learning Community" />


<meta name="date" content="2022-10-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="example-1.html"/>
<link rel="next" href="a-review-of-the-predictive-modeling-process.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/d3-3.3.8/d3.min.js"></script>
<script src="libs/dagre-0.4.0/dagre-d3.min.js"></script>
<link href="libs/mermaid-0.3.0/dist/mermaid.css" rel="stylesheet" />
<script src="libs/mermaid-0.3.0/dist/mermaid.slim.min.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/chromatography-0.1/chromatography.js"></script>
<script src="libs/DiagrammeR-binding-1.0.9/DiagrammeR.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Feature Engineering and Selection Book Club</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="book-club-meetings.html"><a href="book-club-meetings.html"><i class="fa fa-check"></i>Book club meetings</a></li>
<li class="chapter" data-level="" data-path="pace.html"><a href="pace.html"><i class="fa fa-check"></i>Pace</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="structure-of-the-book.html"><a href="structure-of-the-book.html"><i class="fa fa-check"></i><b>1.1</b> Structure of the book</a></li>
<li class="chapter" data-level="1.2" data-path="good-practice-guidelines.html"><a href="good-practice-guidelines.html"><i class="fa fa-check"></i><b>1.2</b> Good Practice guidelines</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="good-practice-guidelines.html"><a href="good-practice-guidelines.html#what-is-feature-engineering"><i class="fa fa-check"></i><b>1.2.1</b> What is feature engineering</a></li>
<li class="chapter" data-level="1.2.2" data-path="good-practice-guidelines.html"><a href="good-practice-guidelines.html#nature-of-modeling"><i class="fa fa-check"></i><b>1.2.2</b> Nature of modeling</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="a-model-with-two-predictors.html"><a href="a-model-with-two-predictors.html"><i class="fa fa-check"></i><b>1.3</b> A model with two predictors</a></li>
<li class="chapter" data-level="1.4" data-path="important-concepts.html"><a href="important-concepts.html"><i class="fa fa-check"></i><b>1.4</b> Important concepts</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="important-concepts.html"><a href="important-concepts.html#acknowledge-vulnerabilities"><i class="fa fa-check"></i><b>1.4.1</b> Acknowledge vulnerabilities</a></li>
<li class="chapter" data-level="1.4.2" data-path="important-concepts.html"><a href="important-concepts.html#the-modeling-process"><i class="fa fa-check"></i><b>1.4.2</b> The <strong>Modeling process</strong></a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="predicting-ridership-on-chicago.html"><a href="predicting-ridership-on-chicago.html"><i class="fa fa-check"></i><b>1.5</b> Predicting ridership on Chicago</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="predicting-ridership-on-chicago.html"><a href="predicting-ridership-on-chicago.html#extra-resources"><i class="fa fa-check"></i><b>1.5.1</b> Extra Resources</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="meeting-videos.html"><a href="meeting-videos.html"><i class="fa fa-check"></i><b>1.6</b> Meeting Videos</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="meeting-videos.html"><a href="meeting-videos.html#cohort-1"><i class="fa fa-check"></i><b>1.6.1</b> Cohort 1</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="illustrative-example-predicting-risk-of-ischemic-stroke.html"><a href="illustrative-example-predicting-risk-of-ischemic-stroke.html"><i class="fa fa-check"></i><b>2</b> Illustrative Example: Predicting Risk of Ischemic Stroke</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-1.html"><a href="introduction-1.html"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="example-1.html"><a href="example-1.html"><i class="fa fa-check"></i><b>2.2</b> Example 1</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="example-1.html"><a href="example-1.html#predictor-quality"><i class="fa fa-check"></i><b>2.2.1</b> Predictor Quality</a></li>
<li class="chapter" data-level="2.2.2" data-path="example-1.html"><a href="example-1.html#understanding-interactions-and-multicollinearity"><i class="fa fa-check"></i><b>2.2.2</b> understanding interactions and multicollinearity</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="example-2.html"><a href="example-2.html"><i class="fa fa-check"></i><b>2.3</b> Example 2</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="example-2.html"><a href="example-2.html#create-a-null-model-with-no-predictors-to-get-baseline-performance"><i class="fa fa-check"></i><b>2.3.1</b> Create a “null model” with no predictors to get baseline performance</a></li>
<li class="chapter" data-level="2.3.2" data-path="example-2.html"><a href="example-2.html#with-tidymodels"><i class="fa fa-check"></i><b>2.3.2</b> With Tidymodels</a></li>
<li class="chapter" data-level="2.3.3" data-path="example-2.html"><a href="example-2.html#interaction-exploration"><i class="fa fa-check"></i><b>2.3.3</b> Interaction exploration</a></li>
<li class="chapter" data-level="2.3.4" data-path="example-2.html"><a href="example-2.html#cohort-1-1"><i class="fa fa-check"></i><b>2.3.4</b> Cohort 1</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="a-review-of-the-predictive-modeling-process.html"><a href="a-review-of-the-predictive-modeling-process.html"><i class="fa fa-check"></i><b>3</b> A Review of the Predictive Modeling Process</a>
<ul>
<li class="chapter" data-level="3.1" data-path="slide-1.html"><a href="slide-1.html"><i class="fa fa-check"></i><b>3.1</b> SLIDE 1</a></li>
<li class="chapter" data-level="3.2" data-path="meeting-videos-1.html"><a href="meeting-videos-1.html"><i class="fa fa-check"></i><b>3.2</b> Meeting Videos</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="meeting-videos-1.html"><a href="meeting-videos-1.html#cohort-1-2"><i class="fa fa-check"></i><b>3.2.1</b> Cohort 1</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exploratory-visualizations.html"><a href="exploratory-visualizations.html"><i class="fa fa-check"></i><b>4</b> Exploratory Visualizations</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-visualization-chart.html"><a href="data-visualization-chart.html"><i class="fa fa-check"></i><b>4.1</b> Data Visualization Chart</a></li>
<li class="chapter" data-level="4.2" data-path="introduction-to-the-chicago-train-ridership-dataset.html"><a href="introduction-to-the-chicago-train-ridership-dataset.html"><i class="fa fa-check"></i><b>4.2</b> Introduction to the Chicago Train Ridership Dataset</a></li>
<li class="chapter" data-level="4.3" data-path="chicago-train-ridership-dataset.html"><a href="chicago-train-ridership-dataset.html"><i class="fa fa-check"></i><b>4.3</b> Chicago Train Ridership dataset</a></li>
<li class="chapter" data-level="4.4" data-path="preliminary-exploratory-visualizations.html"><a href="preliminary-exploratory-visualizations.html"><i class="fa fa-check"></i><b>4.4</b> Preliminary exploratory visualizations</a></li>
<li class="chapter" data-level="4.5" data-path="visualizations-for-numeric-data.html"><a href="visualizations-for-numeric-data.html"><i class="fa fa-check"></i><b>4.5</b> Visualizations for Numeric Data</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="visualizations-for-numeric-data.html"><a href="visualizations-for-numeric-data.html#box-plots-violin-plots-and-histograms"><i class="fa fa-check"></i><b>4.5.1</b> Box Plots, Violin Plots, and Histograms</a></li>
<li class="chapter" data-level="4.5.2" data-path="visualizations-for-numeric-data.html"><a href="visualizations-for-numeric-data.html#augmenting-visualizations-through-faceting-colors-and-shapes"><i class="fa fa-check"></i><b>4.5.2</b> Augmenting Visualizations through Faceting, Colors, and Shapes</a></li>
<li class="chapter" data-level="4.5.3" data-path="visualizations-for-numeric-data.html"><a href="visualizations-for-numeric-data.html#scatterplots"><i class="fa fa-check"></i><b>4.5.3</b> Scatterplots</a></li>
<li class="chapter" data-level="4.5.4" data-path="visualizations-for-numeric-data.html"><a href="visualizations-for-numeric-data.html#scatterplots---exclude-u.s.-holidays"><i class="fa fa-check"></i><b>4.5.4</b> Scatterplots - Exclude U.S. holidays</a></li>
<li class="chapter" data-level="4.5.5" data-path="visualizations-for-numeric-data.html"><a href="visualizations-for-numeric-data.html#heatmaps"><i class="fa fa-check"></i><b>4.5.5</b> Heatmaps</a></li>
<li class="chapter" data-level="4.5.6" data-path="visualizations-for-numeric-data.html"><a href="visualizations-for-numeric-data.html#correlation-matrix-plots"><i class="fa fa-check"></i><b>4.5.6</b> Correlation Matrix Plots</a></li>
<li class="chapter" data-level="4.5.7" data-path="visualizations-for-numeric-data.html"><a href="visualizations-for-numeric-data.html#line-plots"><i class="fa fa-check"></i><b>4.5.7</b> Line plots</a></li>
<li class="chapter" data-level="4.5.8" data-path="visualizations-for-numeric-data.html"><a href="visualizations-for-numeric-data.html#principal-component-analysis-pca"><i class="fa fa-check"></i><b>4.5.8</b> Principal Component Analysis (PCA)</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="visualizations-for-categorical-data-exploring-the-okcupid-dataset.html"><a href="visualizations-for-categorical-data-exploring-the-okcupid-dataset.html"><i class="fa fa-check"></i><b>4.6</b> Visualizations for Categorical Data: Exploring the OKCupid dataset</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="visualizations-for-categorical-data-exploring-the-okcupid-dataset.html"><a href="visualizations-for-categorical-data-exploring-the-okcupid-dataset.html#visualizing-relationships-between-outcomes-and-predictors"><i class="fa fa-check"></i><b>4.6.1</b> Visualizing Relationships between Outcomes and Predictors</a></li>
<li class="chapter" data-level="4.6.2" data-path="visualizations-for-categorical-data-exploring-the-okcupid-dataset.html"><a href="visualizations-for-categorical-data-exploring-the-okcupid-dataset.html#exploring-relationships-between-categorical-predictors"><i class="fa fa-check"></i><b>4.6.2</b> Exploring Relationships Between Categorical Predictors</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="post-modeling-exploratory-visualizations.html"><a href="post-modeling-exploratory-visualizations.html"><i class="fa fa-check"></i><b>4.7</b> Post Modeling Exploratory Visualizations</a></li>
<li class="chapter" data-level="4.8" data-path="residual-diagnostic-plots.html"><a href="residual-diagnostic-plots.html"><i class="fa fa-check"></i><b>4.8</b> Residual Diagnostic Plots</a></li>
<li class="chapter" data-level="4.9" data-path="meeting-videos-2.html"><a href="meeting-videos-2.html"><i class="fa fa-check"></i><b>4.9</b> Meeting Videos</a>
<ul>
<li class="chapter" data-level="4.9.1" data-path="meeting-videos-2.html"><a href="meeting-videos-2.html#cohort-1-3"><i class="fa fa-check"></i><b>4.9.1</b> Cohort 1</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="encoding-categorical-predictors.html"><a href="encoding-categorical-predictors.html"><i class="fa fa-check"></i><b>5</b> Encoding Categorical Predictors</a>
<ul>
<li class="chapter" data-level="5.1" data-path="creating-dummy-variables-for-unordered-categories.html"><a href="creating-dummy-variables-for-unordered-categories.html"><i class="fa fa-check"></i><b>5.1</b> Creating Dummy Variables for Unordered Categories</a></li>
<li class="chapter" data-level="5.2" data-path="encoding-predictors-for-many-categories.html"><a href="encoding-predictors-for-many-categories.html"><i class="fa fa-check"></i><b>5.2</b> Encoding Predictors for Many Categories</a></li>
<li class="chapter" data-level="5.3" data-path="approaches-for-novel-categories.html"><a href="approaches-for-novel-categories.html"><i class="fa fa-check"></i><b>5.3</b> Approaches for Novel Categories</a></li>
<li class="chapter" data-level="5.4" data-path="supervised-encoding-methods.html"><a href="supervised-encoding-methods.html"><i class="fa fa-check"></i><b>5.4</b> Supervised Encoding Methods</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="supervised-encoding-methods.html"><a href="supervised-encoding-methods.html#likelihood-encoding"><i class="fa fa-check"></i><b>5.4.1</b> Likelihood Encoding</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="encodings-for-ordered-data.html"><a href="encodings-for-ordered-data.html"><i class="fa fa-check"></i><b>5.5</b> Encodings for Ordered Data</a></li>
<li class="chapter" data-level="5.6" data-path="creating-features-for-text-data.html"><a href="creating-features-for-text-data.html"><i class="fa fa-check"></i><b>5.6</b> Creating Features for Text Data</a></li>
<li class="chapter" data-level="5.7" data-path="factors-versus-dummy-variables-in-tree-based-models.html"><a href="factors-versus-dummy-variables-in-tree-based-models.html"><i class="fa fa-check"></i><b>5.7</b> Factors versus Dummy Variables in Tree-Based Models</a></li>
<li class="chapter" data-level="5.8" data-path="summary.html"><a href="summary.html"><i class="fa fa-check"></i><b>5.8</b> Summary</a></li>
<li class="chapter" data-level="5.9" data-path="meeting-videos-3.html"><a href="meeting-videos-3.html"><i class="fa fa-check"></i><b>5.9</b> Meeting Videos</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="meeting-videos-3.html"><a href="meeting-videos-3.html#cohort-1-4"><i class="fa fa-check"></i><b>5.9.1</b> Cohort 1</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="engineering-numeric-predictors.html"><a href="engineering-numeric-predictors.html"><i class="fa fa-check"></i><b>6</b> Engineering Numeric Predictors</a>
<ul>
<li class="chapter" data-level="6.1" data-path="problematic-characteristics-of-predictors.html"><a href="problematic-characteristics-of-predictors.html"><i class="fa fa-check"></i><b>6.1</b> Problematic Characteristics of predictors</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="problematic-characteristics-of-predictors.html"><a href="problematic-characteristics-of-predictors.html#dealing-with-skewed-data"><i class="fa fa-check"></i><b>6.1.1</b> Dealing with Skewed Data</a></li>
<li class="chapter" data-level="6.1.2" data-path="problematic-characteristics-of-predictors.html"><a href="problematic-characteristics-of-predictors.html#standardizing"><i class="fa fa-check"></i><b>6.1.2</b> Standardizing</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="expanding-numeric-transformations.html"><a href="expanding-numeric-transformations.html"><i class="fa fa-check"></i><b>6.2</b> Expanding Numeric Transformations</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="expanding-numeric-transformations.html"><a href="expanding-numeric-transformations.html#nonlinear-features-via-basis-expansions-and-splines"><i class="fa fa-check"></i><b>6.2.1</b> Nonlinear Features via Basis Expansions and Splines</a></li>
<li class="chapter" data-level="6.2.2" data-path="expanding-numeric-transformations.html"><a href="expanding-numeric-transformations.html#discretize-predictors-as-a-last-resort"><i class="fa fa-check"></i><b>6.2.2</b> Discretize Predictors as a Last Resort</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="new-features-from-multiple-predictors.html"><a href="new-features-from-multiple-predictors.html"><i class="fa fa-check"></i><b>6.3</b> New Features from Multiple predictors</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="new-features-from-multiple-predictors.html"><a href="new-features-from-multiple-predictors.html#linear-projection-methods"><i class="fa fa-check"></i><b>6.3.1</b> Linear Projection Methods</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="meeting-videos-4.html"><a href="meeting-videos-4.html"><i class="fa fa-check"></i><b>6.4</b> Meeting Videos</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="meeting-videos-4.html"><a href="meeting-videos-4.html#cohort-1-5"><i class="fa fa-check"></i><b>6.4.1</b> Cohort 1</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="detecting-interaction-effects.html"><a href="detecting-interaction-effects.html"><i class="fa fa-check"></i><b>7</b> Detecting Interaction Effects</a>
<ul>
<li class="chapter" data-level="7.1" data-path="introduction-2.html"><a href="introduction-2.html"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="four-type-of-interactions.html"><a href="four-type-of-interactions.html"><i class="fa fa-check"></i><b>7.2</b> Four type of Interactions</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="four-type-of-interactions.html"><a href="four-type-of-interactions.html#building-the-base-model-for-ames-data"><i class="fa fa-check"></i><b>7.2.1</b> Building the base-model for <strong>Ames</strong> data</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="guiding-principles-in-the-search-for-interactions.html"><a href="guiding-principles-in-the-search-for-interactions.html"><i class="fa fa-check"></i><b>7.3</b> Guiding Principles in the Search for Interactions</a></li>
<li class="chapter" data-level="7.4" data-path="practical-considerations.html"><a href="practical-considerations.html"><i class="fa fa-check"></i><b>7.4</b> Practical Considerations</a></li>
<li class="chapter" data-level="7.5" data-path="the-brute-force-approach-to-identifying-predictive-interactions.html"><a href="the-brute-force-approach-to-identifying-predictive-interactions.html"><i class="fa fa-check"></i><b>7.5</b> The Brute-Force Approach to Identifying Predictive Interactions</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="the-brute-force-approach-to-identifying-predictive-interactions.html"><a href="the-brute-force-approach-to-identifying-predictive-interactions.html#simple-screening"><i class="fa fa-check"></i><b>7.5.1</b> Simple Screening</a></li>
<li class="chapter" data-level="7.5.2" data-path="the-brute-force-approach-to-identifying-predictive-interactions.html"><a href="the-brute-force-approach-to-identifying-predictive-interactions.html#penalized-regression"><i class="fa fa-check"></i><b>7.5.2</b> Penalized Regression</a></li>
<li class="chapter" data-level="7.5.3" data-path="the-brute-force-approach-to-identifying-predictive-interactions.html"><a href="the-brute-force-approach-to-identifying-predictive-interactions.html#practical-example-with-ames-data-and-glmnet"><i class="fa fa-check"></i><b>7.5.3</b> Practical example with Ames data and glmnet</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="approaches-when-complete-enumeration-is-practically-impossible.html"><a href="approaches-when-complete-enumeration-is-practically-impossible.html"><i class="fa fa-check"></i><b>7.6</b> Approaches when Complete Enumeration is Practically Impossible</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="approaches-when-complete-enumeration-is-practically-impossible.html"><a href="approaches-when-complete-enumeration-is-practically-impossible.html#guiding-principles-and-two-stage-modeling"><i class="fa fa-check"></i><b>7.6.1</b> Guiding Principles and Two-stage Modeling</a></li>
<li class="chapter" data-level="7.6.2" data-path="approaches-when-complete-enumeration-is-practically-impossible.html"><a href="approaches-when-complete-enumeration-is-practically-impossible.html#tree-based-methods"><i class="fa fa-check"></i><b>7.6.2</b> Tree-based Methods</a></li>
<li class="chapter" data-level="7.6.3" data-path="approaches-when-complete-enumeration-is-practically-impossible.html"><a href="approaches-when-complete-enumeration-is-practically-impossible.html#the-feasible-solution-algorithm"><i class="fa fa-check"></i><b>7.6.3</b> The Feasible Solution Algorithm</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="other-potentially-useful-tools.html"><a href="other-potentially-useful-tools.html"><i class="fa fa-check"></i><b>7.7</b> Other Potentially Useful Tools</a></li>
<li class="chapter" data-level="7.8" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7.8</b> Conclusion</a></li>
<li class="chapter" data-level="7.9" data-path="meeting-videos-5.html"><a href="meeting-videos-5.html"><i class="fa fa-check"></i><b>7.9</b> Meeting Videos</a>
<ul>
<li class="chapter" data-level="7.9.1" data-path="meeting-videos-5.html"><a href="meeting-videos-5.html#cohort-1-6"><i class="fa fa-check"></i><b>7.9.1</b> Cohort 1</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="handling-missing-data.html"><a href="handling-missing-data.html"><i class="fa fa-check"></i><b>8</b> Handling Missing Data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="types-of-missing-data.html"><a href="types-of-missing-data.html"><i class="fa fa-check"></i><b>8.1</b> Types of missing data</a></li>
<li class="chapter" data-level="8.2" data-path="missing-data-mechanisms.html"><a href="missing-data-mechanisms.html"><i class="fa fa-check"></i><b>8.2</b> Missing data mechanisms</a></li>
<li class="chapter" data-level="8.3" data-path="statistical-rethinking-bayesian-chapter-20---missing-data-other-opportunities.html"><a href="statistical-rethinking-bayesian-chapter-20---missing-data-other-opportunities.html"><i class="fa fa-check"></i><b>8.3</b> Statistical Rethinking (Bayesian) Chapter 20 - Missing Data &amp; Other Opportunities</a></li>
<li class="chapter" data-level="8.4" data-path="why-detecting-the-missing-data-mechanism-is-important.html"><a href="why-detecting-the-missing-data-mechanism-is-important.html"><i class="fa fa-check"></i><b>8.4</b> Why detecting the missing data mechanism is important?</a></li>
<li class="chapter" data-level="8.5" data-path="visualizing-missing-information.html"><a href="visualizing-missing-information.html"><i class="fa fa-check"></i><b>8.5</b> Visualizing Missing Information</a></li>
<li class="chapter" data-level="8.6" data-path="exploring-pairwise-relationships-between-predictors.html"><a href="exploring-pairwise-relationships-between-predictors.html"><i class="fa fa-check"></i><b>8.6</b> Exploring pairwise relationships between predictors</a></li>
<li class="chapter" data-level="8.7" data-path="missing-values-for-the-chicago-ridership-data.html"><a href="missing-values-for-the-chicago-ridership-data.html"><i class="fa fa-check"></i><b>8.7</b> Missing Values for the Chicago ridership data</a></li>
<li class="chapter" data-level="8.8" data-path="missing-data-patterns-for-stations-originally-in-the-chicago-ridership-data.html"><a href="missing-data-patterns-for-stations-originally-in-the-chicago-ridership-data.html"><i class="fa fa-check"></i><b>8.8</b> Missing data patterns for stations originally in the Chicago ridership data</a></li>
<li class="chapter" data-level="8.9" data-path="models-that-are-resistant-to-missing-values.html"><a href="models-that-are-resistant-to-missing-values.html"><i class="fa fa-check"></i><b>8.9</b> Models that are Resistant to Missing Values</a></li>
<li class="chapter" data-level="8.10" data-path="deletion-of-data.html"><a href="deletion-of-data.html"><i class="fa fa-check"></i><b>8.10</b> Deletion of Data</a></li>
<li class="chapter" data-level="8.11" data-path="encoding-missingness.html"><a href="encoding-missingness.html"><i class="fa fa-check"></i><b>8.11</b> Encoding Missingness</a></li>
<li class="chapter" data-level="8.12" data-path="imputation-methods.html"><a href="imputation-methods.html"><i class="fa fa-check"></i><b>8.12</b> Imputation methods</a></li>
<li class="chapter" data-level="8.13" data-path="summary-1.html"><a href="summary-1.html"><i class="fa fa-check"></i><b>8.13</b> Summary</a></li>
<li class="chapter" data-level="8.14" data-path="meeting-videos-6.html"><a href="meeting-videos-6.html"><i class="fa fa-check"></i><b>8.14</b> Meeting Videos</a>
<ul>
<li class="chapter" data-level="8.14.1" data-path="meeting-videos-6.html"><a href="meeting-videos-6.html#cohort-1-7"><i class="fa fa-check"></i><b>8.14.1</b> Cohort 1</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="working-with-profile-data.html"><a href="working-with-profile-data.html"><i class="fa fa-check"></i><b>9</b> Working with Profile Data</a>
<ul>
<li class="chapter" data-level="9.1" data-path="illustrative-data-pharmaceutical-manufacturing-monitoring.html"><a href="illustrative-data-pharmaceutical-manufacturing-monitoring.html"><i class="fa fa-check"></i><b>9.1</b> Illustrative Data: Pharmaceutical Manufacturing Monitoring</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="illustrative-data-pharmaceutical-manufacturing-monitoring.html"><a href="illustrative-data-pharmaceutical-manufacturing-monitoring.html#introduction-3"><i class="fa fa-check"></i><b>9.1.1</b> Introduction</a></li>
<li class="chapter" data-level="9.1.2" data-path="illustrative-data-pharmaceutical-manufacturing-monitoring.html"><a href="illustrative-data-pharmaceutical-manufacturing-monitoring.html#important-definitions"><i class="fa fa-check"></i><b>9.1.2</b> IMPORTANT DEFINITIONS !</a></li>
<li class="chapter" data-level="9.1.3" data-path="illustrative-data-pharmaceutical-manufacturing-monitoring.html"><a href="illustrative-data-pharmaceutical-manufacturing-monitoring.html#preliminary-results"><i class="fa fa-check"></i><b>9.1.3</b> Preliminary Results</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="what-are-the-experimental-unit-and-the-unit-of-prediction.html"><a href="what-are-the-experimental-unit-and-the-unit-of-prediction.html"><i class="fa fa-check"></i><b>9.2</b> What are the Experimental Unit and the Unit of Prediction?</a></li>
<li class="chapter" data-level="9.3" data-path="reducing-background.html"><a href="reducing-background.html"><i class="fa fa-check"></i><b>9.3</b> Reducing Background</a></li>
<li class="chapter" data-level="9.4" data-path="reducing-other-noise.html"><a href="reducing-other-noise.html"><i class="fa fa-check"></i><b>9.4</b> Reducing Other Noise</a></li>
<li class="chapter" data-level="9.5" data-path="exploiting-correlation.html"><a href="exploiting-correlation.html"><i class="fa fa-check"></i><b>9.5</b> Exploiting Correlation</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="exploiting-correlation.html"><a href="exploiting-correlation.html#altogether"><i class="fa fa-check"></i><b>9.5.1</b> Altogether~</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="impacts-of-data-processing-on-modeling.html"><a href="impacts-of-data-processing-on-modeling.html"><i class="fa fa-check"></i><b>9.6</b> Impacts of Data Processing on Modeling</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="impacts-of-data-processing-on-modeling.html"><a href="impacts-of-data-processing-on-modeling.html#cross-validation"><i class="fa fa-check"></i><b>9.6.1</b> Cross Validation</a></li>
<li class="chapter" data-level="9.6.2" data-path="impacts-of-data-processing-on-modeling.html"><a href="impacts-of-data-processing-on-modeling.html#model-selection"><i class="fa fa-check"></i><b>9.6.2</b> Model Selection</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="summary-2.html"><a href="summary-2.html"><i class="fa fa-check"></i><b>9.7</b> Summary</a></li>
<li class="chapter" data-level="9.8" data-path="meeting-videos-7.html"><a href="meeting-videos-7.html"><i class="fa fa-check"></i><b>9.8</b> Meeting Videos</a>
<ul>
<li class="chapter" data-level="9.8.1" data-path="meeting-videos-7.html"><a href="meeting-videos-7.html#cohort-1-8"><i class="fa fa-check"></i><b>9.8.1</b> Cohort 1</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="feature-selection-overview.html"><a href="feature-selection-overview.html"><i class="fa fa-check"></i><b>10</b> Feature Selection Overview</a>
<ul>
<li class="chapter" data-level="10.1" data-path="introduction-4.html"><a href="introduction-4.html"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="feature-selection.html"><a href="feature-selection.html"><i class="fa fa-check"></i><b>10.2</b> Feature selection</a></li>
<li class="chapter" data-level="10.3" data-path="classes.html"><a href="classes.html"><i class="fa fa-check"></i><b>10.3</b> Classes</a></li>
<li class="chapter" data-level="10.4" data-path="irrelevant-features.html"><a href="irrelevant-features.html"><i class="fa fa-check"></i><b>10.4</b> Irrelevant features</a></li>
<li class="chapter" data-level="10.5" data-path="overfitting.html"><a href="overfitting.html"><i class="fa fa-check"></i><b>10.5</b> Overfitting</a></li>
<li class="chapter" data-level="10.6" data-path="a-case-study.html"><a href="a-case-study.html"><i class="fa fa-check"></i><b>10.6</b> A case study</a></li>
<li class="chapter" data-level="10.7" data-path="conclusion-1.html"><a href="conclusion-1.html"><i class="fa fa-check"></i><b>10.7</b> Conclusion</a></li>
<li class="chapter" data-level="10.8" data-path="meeting-videos-8.html"><a href="meeting-videos-8.html"><i class="fa fa-check"></i><b>10.8</b> Meeting Videos</a>
<ul>
<li class="chapter" data-level="10.8.1" data-path="meeting-videos-8.html"><a href="meeting-videos-8.html#cohort-1-9"><i class="fa fa-check"></i><b>10.8.1</b> Cohort 1</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="greedy-search-methods.html"><a href="greedy-search-methods.html"><i class="fa fa-check"></i><b>11</b> Greedy Search Methods</a>
<ul>
<li class="chapter" data-level="11.1" data-path="slide-1-1.html"><a href="slide-1-1.html"><i class="fa fa-check"></i><b>11.1</b> SLIDE 1</a></li>
<li class="chapter" data-level="11.2" data-path="meeting-videos-9.html"><a href="meeting-videos-9.html"><i class="fa fa-check"></i><b>11.2</b> Meeting Videos</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="meeting-videos-9.html"><a href="meeting-videos-9.html#cohort-1-10"><i class="fa fa-check"></i><b>11.2.1</b> Cohort 1</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="global-search-methods.html"><a href="global-search-methods.html"><i class="fa fa-check"></i><b>12</b> Global Search Methods</a>
<ul>
<li class="chapter" data-level="12.1" data-path="slide-1-2.html"><a href="slide-1-2.html"><i class="fa fa-check"></i><b>12.1</b> SLIDE 1</a></li>
<li class="chapter" data-level="12.2" data-path="meeting-videos-10.html"><a href="meeting-videos-10.html"><i class="fa fa-check"></i><b>12.2</b> Meeting Videos</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="meeting-videos-10.html"><a href="meeting-videos-10.html#cohort-1-11"><i class="fa fa-check"></i><b>12.2.1</b> Cohort 1</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Feature Engineering and Selection Book Club</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="example-2" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Example 2<a href="example-2.html#example-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Code for Section 2.4 at
<a href="https://bookdown.org/max/FES/stroke-tour.html#stroke-exploration" class="uri">https://bookdown.org/max/FES/stroke-tour.html#stroke-exploration</a></p>
<p>Code to compare 2-way interaction models to their main effects model</p>
<p><code>a</code> and <code>b</code> are two models from <code>train()</code></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="example-2.html#cb38-1" aria-hidden="true" tabindex="-1"></a>compare_models_1way <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b, <span class="at">metric =</span> a<span class="sc">$</span>metric[<span class="dv">1</span>], ...) {</span>
<span id="cb38-2"><a href="example-2.html#cb38-2" aria-hidden="true" tabindex="-1"></a>  mods <span class="ot">&lt;-</span> <span class="fu">list</span>(a, b)</span>
<span id="cb38-3"><a href="example-2.html#cb38-3" aria-hidden="true" tabindex="-1"></a>  rs <span class="ot">&lt;-</span> <span class="fu">resamples</span>(mods)</span>
<span id="cb38-4"><a href="example-2.html#cb38-4" aria-hidden="true" tabindex="-1"></a>  diffs <span class="ot">&lt;-</span> <span class="fu">diff</span>(rs, <span class="at">metric =</span> metric[<span class="dv">1</span>], ...)</span>
<span id="cb38-5"><a href="example-2.html#cb38-5" aria-hidden="true" tabindex="-1"></a>  diffs<span class="sc">$</span>statistics[[<span class="dv">1</span>]][[<span class="dv">1</span>]]</span>
<span id="cb38-6"><a href="example-2.html#cb38-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><code>risk_preds</code> is contained in the original data file and has the predictor
names for the risk related variables</p>
<div id="create-a-null-model-with-no-predictors-to-get-baseline-performance" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Create a “null model” with no predictors to get baseline performance<a href="example-2.html#create-a-null-model-with-no-predictors-to-get-baseline-performance" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Compare the models with single predictors to the risk model. These data make</p>
<p><a href="https://bookdown.org/max/FES/stroke-tour.html#tab:stroke-strokeRiskAssociations" class="uri">https://bookdown.org/max/FES/stroke-tour.html#tab:stroke-strokeRiskAssociations</a></p>
<p><code>VC_preds</code> and <code>risk_preds</code> contain the predictor names for different sets.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="example-2.html#cb39-1" aria-hidden="true" tabindex="-1"></a>one_predictor_res <span class="ot">&lt;-</span> </span>
<span id="cb39-2"><a href="example-2.html#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(<span class="at">Predictor =</span> <span class="fu">c</span>(VC_preds, risk_preds), </span>
<span id="cb39-3"><a href="example-2.html#cb39-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">Improvement =</span> <span class="cn">NA</span>,</span>
<span id="cb39-4"><a href="example-2.html#cb39-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">Pvalue =</span> <span class="cn">NA</span>,</span>
<span id="cb39-5"><a href="example-2.html#cb39-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">ROC =</span> <span class="cn">NA</span>,</span>
<span id="cb39-6"><a href="example-2.html#cb39-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb39-7"><a href="example-2.html#cb39-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-8"><a href="example-2.html#cb39-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-9"><a href="example-2.html#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(one_predictor_res)) {</span>
<span id="cb39-10"><a href="example-2.html#cb39-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set.seed</span>(<span class="dv">63331</span>)</span>
<span id="cb39-11"><a href="example-2.html#cb39-11" aria-hidden="true" tabindex="-1"></a>  var_mod <span class="ot">&lt;-</span> <span class="fu">train</span>(Stroke <span class="sc">~</span> ., </span>
<span id="cb39-12"><a href="example-2.html#cb39-12" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> stroke_train[, <span class="fu">c</span>(<span class="st">&quot;Stroke&quot;</span>, one_predictor_res<span class="sc">$</span>Predictor[i])], </span>
<span id="cb39-13"><a href="example-2.html#cb39-13" aria-hidden="true" tabindex="-1"></a>                   <span class="at">method =</span> <span class="st">&quot;glm&quot;</span>, </span>
<span id="cb39-14"><a href="example-2.html#cb39-14" aria-hidden="true" tabindex="-1"></a>                   <span class="at">metric =</span> <span class="st">&quot;ROC&quot;</span>,</span>
<span id="cb39-15"><a href="example-2.html#cb39-15" aria-hidden="true" tabindex="-1"></a>                   <span class="at">trControl =</span> ctrl)  </span>
<span id="cb39-16"><a href="example-2.html#cb39-16" aria-hidden="true" tabindex="-1"></a>  tmp_diff <span class="ot">&lt;-</span> <span class="fu">compare_models_1way</span>(var_mod, </span>
<span id="cb39-17"><a href="example-2.html#cb39-17" aria-hidden="true" tabindex="-1"></a>                                  null_mod, </span>
<span id="cb39-18"><a href="example-2.html#cb39-18" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">alternative =</span> <span class="st">&quot;greater&quot;</span>)</span>
<span id="cb39-19"><a href="example-2.html#cb39-19" aria-hidden="true" tabindex="-1"></a>  one_predictor_res<span class="sc">$</span>ROC[i] <span class="ot">&lt;-</span> <span class="fu">getTrainPerf</span>(var_mod)[<span class="dv">1</span>, <span class="st">&quot;TrainROC&quot;</span>]</span>
<span id="cb39-20"><a href="example-2.html#cb39-20" aria-hidden="true" tabindex="-1"></a>  one_predictor_res<span class="sc">$</span>Improvement[i] <span class="ot">&lt;-</span> tmp_diff<span class="sc">$</span>estimate</span>
<span id="cb39-21"><a href="example-2.html#cb39-21" aria-hidden="true" tabindex="-1"></a>  one_predictor_res<span class="sc">$</span>Pvalue[i] <span class="ot">&lt;-</span> tmp_diff<span class="sc">$</span>p.value</span>
<span id="cb39-22"><a href="example-2.html#cb39-22" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="with-tidymodels" class="section level3 hasAnchor" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> With Tidymodels<a href="example-2.html#with-tidymodels" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>attempting this with tidymodels, not exactly the same
need to make some sort of resample object to feed workflow_map</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="example-2.html#cb40-1" aria-hidden="true" tabindex="-1"></a>model_folds <span class="ot">&lt;-</span> <span class="fu">vfold_cv</span>(tidy_training, <span class="at">v =</span> <span class="dv">10</span>, <span class="at">repeats =</span> <span class="dv">5</span>)</span>
<span id="cb40-2"><a href="example-2.html#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co"># model_boots &lt;- bootstraps(tidy_training, times = 50) #want to bootstrap this?</span></span>
<span id="cb40-3"><a href="example-2.html#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="example-2.html#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co">#defining the null model</span></span>
<span id="cb40-5"><a href="example-2.html#cb40-5" aria-hidden="true" tabindex="-1"></a>null_class_model <span class="ot">&lt;-</span> </span>
<span id="cb40-6"><a href="example-2.html#cb40-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">null_model</span>() <span class="sc">%&gt;%</span></span>
<span id="cb40-7"><a href="example-2.html#cb40-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_engine</span>(<span class="st">&quot;parsnip&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-8"><a href="example-2.html#cb40-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_mode</span>(<span class="st">&quot;classification&quot;</span>)</span>
<span id="cb40-9"><a href="example-2.html#cb40-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-10"><a href="example-2.html#cb40-10" aria-hidden="true" tabindex="-1"></a>null_model <span class="ot">&lt;-</span> <span class="fu">workflow_set</span>(<span class="at">preproc =</span> <span class="fu">c</span>(Stroke <span class="sc">~</span> .), </span>
<span id="cb40-11"><a href="example-2.html#cb40-11" aria-hidden="true" tabindex="-1"></a>                           <span class="at">models =</span> <span class="fu">list</span>(<span class="at">null_mod =</span> null_class_model))</span></code></pre></div>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="example-2.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># defining the model</span></span>
<span id="cb41-2"><a href="example-2.html#cb41-2" aria-hidden="true" tabindex="-1"></a>lm_model <span class="ot">&lt;-</span> </span>
<span id="cb41-3"><a href="example-2.html#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">logistic_reg</span>(</span>
<span id="cb41-4"><a href="example-2.html#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">mode =</span> <span class="st">&quot;classification&quot;</span>, <span class="co"># outcome is a classification Stroke Y/N</span></span>
<span id="cb41-5"><a href="example-2.html#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">engine =</span> <span class="st">&quot;glm&quot;</span>,   <span class="co">#using glm like the example</span></span>
<span id="cb41-6"><a href="example-2.html#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">penalty =</span> <span class="cn">NULL</span>,   </span>
<span id="cb41-7"><a href="example-2.html#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">mixture =</span> <span class="cn">NULL</span>        </span>
<span id="cb41-8"><a href="example-2.html#cb41-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="example-2.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># make named list of single variable formulae</span></span>
<span id="cb42-2"><a href="example-2.html#cb42-2" aria-hidden="true" tabindex="-1"></a>single_var_formulae <span class="ot">&lt;-</span></span>
<span id="cb42-3"><a href="example-2.html#cb42-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(VC_preds, risk_preds) <span class="sc">%&gt;%</span></span>
<span id="cb42-4"><a href="example-2.html#cb42-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="st">&quot;Stroke ~ &quot;</span>, .) <span class="sc">%&gt;%</span></span>
<span id="cb42-5"><a href="example-2.html#cb42-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_names</span>(., <span class="fu">c</span>(VC_preds, risk_preds)) <span class="sc">%&gt;%</span></span>
<span id="cb42-6"><a href="example-2.html#cb42-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.list</span>() <span class="sc">%&gt;%</span></span>
<span id="cb42-7"><a href="example-2.html#cb42-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map</span>(., as.formula)</span></code></pre></div>
<p>Create the workflow set, all of our models use the same type of model and input data</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="example-2.html#cb43-1" aria-hidden="true" tabindex="-1"></a>single_var_models <span class="ot">&lt;-</span> <span class="fu">workflow_set</span>(<span class="at">preproc =</span> single_var_formulae, </span>
<span id="cb43-2"><a href="example-2.html#cb43-2" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">models =</span> <span class="fu">list</span>(<span class="at">lm =</span> lm_model))</span>
<span id="cb43-3"><a href="example-2.html#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="example-2.html#cb43-4" aria-hidden="true" tabindex="-1"></a>all_models <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(null_model, single_var_models)</span>
<span id="cb43-5"><a href="example-2.html#cb43-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-6"><a href="example-2.html#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="co"># control grid/resamples allow processing of resampled data and parallel processing</span></span>
<span id="cb43-7"><a href="example-2.html#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="co"># here we are asking only to save the predictions</span></span>
<span id="cb43-8"><a href="example-2.html#cb43-8" aria-hidden="true" tabindex="-1"></a>control <span class="ot">&lt;-</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="example-2.html#cb44-1" aria-hidden="true" tabindex="-1"></a>doParallel<span class="sc">::</span><span class="fu">registerDoParallel</span>()</span>
<span id="cb44-2"><a href="example-2.html#cb44-2" aria-hidden="true" tabindex="-1"></a>all_models1 <span class="ot">&lt;-</span> </span>
<span id="cb44-3"><a href="example-2.html#cb44-3" aria-hidden="true" tabindex="-1"></a>    all_models <span class="sc">%&gt;%</span></span>
<span id="cb44-4"><a href="example-2.html#cb44-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">#map over each model and its resamples, use the control parameters, and be noisy</span></span>
<span id="cb44-5"><a href="example-2.html#cb44-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">workflow_map</span>(., </span>
<span id="cb44-6"><a href="example-2.html#cb44-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">resamples =</span> model_folds, </span>
<span id="cb44-7"><a href="example-2.html#cb44-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">control =</span> control, </span>
<span id="cb44-8"><a href="example-2.html#cb44-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">verbose =</span> <span class="cn">TRUE</span>)</span>
<span id="cb44-9"><a href="example-2.html#cb44-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-10"><a href="example-2.html#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="co"># save(all_models1, file = &quot;data/all_models1.RData&quot;, compress = &quot;xz&quot;)</span></span></code></pre></div>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="example-2.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># per model what are the predictions, summmarize over resamples</span></span>
<span id="cb45-2"><a href="example-2.html#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">collect_predictions</span>(all_models1, <span class="at">summarize =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2,492 × 9
##    wflow_id         .config   preproc model  .row Stroke .pred_N .pred_Y .pred…¹
##    &lt;chr&gt;            &lt;fct&gt;     &lt;chr&gt;   &lt;chr&gt; &lt;int&gt; &lt;fct&gt;    &lt;dbl&gt;   &lt;dbl&gt; &lt;fct&gt;  
##  1 formula_null_mod Preproce… formula null…     1 N        0.495   0.505 Y      
##  2 formula_null_mod Preproce… formula null…     2 N        0.478   0.522 Y      
##  3 formula_null_mod Preproce… formula null…     3 N        0.495   0.505 Y      
##  4 formula_null_mod Preproce… formula null…     4 N        0.475   0.525 Y      
##  5 formula_null_mod Preproce… formula null…     5 N        0.485   0.515 Y      
##  6 formula_null_mod Preproce… formula null…     6 N        0.498   0.502 Y      
##  7 formula_null_mod Preproce… formula null…     7 N        0.488   0.512 Y      
##  8 formula_null_mod Preproce… formula null…     8 N        0.485   0.515 Y      
##  9 formula_null_mod Preproce… formula null…     9 N        0.491   0.509 Y      
## 10 formula_null_mod Preproce… formula null…    10 N        0.482   0.518 Y      
## # … with 2,482 more rows, and abbreviated variable name ¹​.pred_class</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="example-2.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># per model what are the outputs in terms of fit (auc_roc) and accuracy </span></span>
<span id="cb47-2"><a href="example-2.html#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">collect_metrics</span>(all_models1)</span></code></pre></div>
<pre><code>## # A tibble: 56 × 9
##    wflow_id         .config    preproc model .metric .esti…¹  mean     n std_err
##    &lt;chr&gt;            &lt;fct&gt;      &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;
##  1 formula_null_mod Preproces… formula null… accura… binary  0.378    50  0.0131
##  2 formula_null_mod Preproces… formula null… roc_auc binary  0.5      50  0     
##  3 CALCVol_lm       Preproces… formula logi… accura… binary  0.388    50  0.0183
##  4 CALCVol_lm       Preproces… formula logi… roc_auc binary  0.457    50  0.0291
##  5 CALCVolProp_lm   Preproces… formula logi… accura… binary  0.441    50  0.0196
##  6 CALCVolProp_lm   Preproces… formula logi… roc_auc binary  0.502    50  0.0260
##  7 MATXVol_lm       Preproces… formula logi… accura… binary  0.346    50  0.0177
##  8 MATXVol_lm       Preproces… formula logi… roc_auc binary  0.380    50  0.0277
##  9 MATXVolProp_lm   Preproces… formula logi… accura… binary  0.415    50  0.0222
## 10 MATXVolProp_lm   Preproces… formula logi… roc_auc binary  0.516    50  0.0285
## # … with 46 more rows, and abbreviated variable name ¹​.estimator</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="example-2.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot the output to show which individual parameters have the most impact</span></span>
<span id="cb49-2"><a href="example-2.html#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(</span>
<span id="cb49-3"><a href="example-2.html#cb49-3" aria-hidden="true" tabindex="-1"></a>   all_models1,</span>
<span id="cb49-4"><a href="example-2.html#cb49-4" aria-hidden="true" tabindex="-1"></a>   <span class="at">rank_metric =</span> <span class="st">&quot;roc_auc&quot;</span>,  <span class="co"># &lt;- how to order models</span></span>
<span id="cb49-5"><a href="example-2.html#cb49-5" aria-hidden="true" tabindex="-1"></a>   <span class="at">metric =</span> <span class="st">&quot;roc_auc&quot;</span>,       <span class="co"># &lt;- which metric to visualize</span></span>
<span id="cb49-6"><a href="example-2.html#cb49-6" aria-hidden="true" tabindex="-1"></a>   <span class="at">select_best =</span> <span class="cn">FALSE</span>     <span class="co"># &lt;- one point per workflow</span></span>
<span id="cb49-7"><a href="example-2.html#cb49-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb49-8"><a href="example-2.html#cb49-8" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">y =</span> mean <span class="sc">-</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">10</span><span class="sc">*</span>mean, </span>
<span id="cb49-9"><a href="example-2.html#cb49-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">label =</span> wflow_id),</span>
<span id="cb49-10"><a href="example-2.html#cb49-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb49-11"><a href="example-2.html#cb49-11" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="bookclub-feat_eng_files/figure-html/02-illustrative-example-predicting-risk-of-ischemic-stroke-23-1.png" width="672" /></p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="example-2.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># per model, sort by auc_roc</span></span>
<span id="cb50-2"><a href="example-2.html#cb50-2" aria-hidden="true" tabindex="-1"></a>all_models1 <span class="sc">%&gt;%</span></span>
<span id="cb50-3"><a href="example-2.html#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rank_results</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb50-4"><a href="example-2.html#cb50-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">filter</span>(.metric <span class="sc">==</span> <span class="st">&quot;roc_auc&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 28 × 9
##    wflow_id              .config .metric  mean std_err     n prepr…¹ model  rank
##    &lt;chr&gt;                 &lt;fct&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;   &lt;chr&gt; &lt;int&gt;
##  1 MaxRemodelingRatio_lm Prepro… roc_auc 0.682  0.0300    50 formula logi…     1
##  2 MaxMaxWallThickness_… Prepro… roc_auc 0.669  0.0276    50 formula logi…     2
##  3 MaxStenosisByArea_lm  Prepro… roc_auc 0.651  0.0256    50 formula logi…     3
##  4 MaxStenosisByDiamete… Prepro… roc_auc 0.640  0.0281    50 formula logi…     4
##  5 MaxDilationByArea_lm  Prepro… roc_auc 0.625  0.0302    50 formula logi…     5
##  6 MaxLRNCArea_lm        Prepro… roc_auc 0.622  0.0281    50 formula logi…     6
##  7 LRNCVolProp_lm        Prepro… roc_auc 0.598  0.0260    50 formula logi…     7
##  8 MaxMATXArea_lm        Prepro… roc_auc 0.595  0.0298    50 formula logi…     8
##  9 MaxWallArea_lm        Prepro… roc_auc 0.591  0.0300    50 formula logi…     9
## 10 CoronaryArteryDiseas… Prepro… roc_auc 0.574  0.0208    50 formula logi…    10
## # … with 18 more rows, and abbreviated variable name ¹​preprocessor</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="example-2.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data in table 2.3</span></span>
<span id="cb52-2"><a href="example-2.html#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="co"># https://bookdown.org/max/FES/stroke-tour.html#tab:stroke-strokeRiskAssociations</span></span>
<span id="cb52-3"><a href="example-2.html#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="example-2.html#cb52-4" aria-hidden="true" tabindex="-1"></a>one_predictor_res <span class="sc">%&gt;%</span> </span>
<span id="cb52-5"><a href="example-2.html#cb52-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(Predictor <span class="sc">%in%</span> risk_preds) <span class="sc">%&gt;%</span> </span>
<span id="cb52-6"><a href="example-2.html#cb52-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Pvalue)</span></code></pre></div>
<pre><code>##                     Predictor Improvement       Pvalue      ROC
## 1       CoronaryArteryDisease    0.079000 0.0002957741 0.579000
## 2             DiabetesHistory    0.066500 0.0003019908 0.566500
## 3         HypertensionHistory    0.065000 0.0004269919 0.565000
## 4                         age    0.083375 0.0010729715 0.583375
## 5          AtrialFibrillation    0.044000 0.0013131334 0.544000
## 6              SmokingHistory   -0.009500 0.6520765973 0.490500
## 7                         sex   -0.034500 0.9287682162 0.465500
## 8 HypercholesterolemiaHistory   -0.101500 0.9999999044 0.398500</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="example-2.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Figure 2.4</span></span>
<span id="cb54-2"><a href="example-2.html#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="co"># https://bookdown.org/max/FES/stroke-tour.html#fig:stroke-vascuCAPAssocations</span></span>
<span id="cb54-3"><a href="example-2.html#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="example-2.html#cb54-4" aria-hidden="true" tabindex="-1"></a>vc_pred <span class="ot">&lt;-</span> </span>
<span id="cb54-5"><a href="example-2.html#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">recipe</span>(Stroke <span class="sc">~</span> ., <span class="at">data =</span> stroke_train <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(Stroke, <span class="sc">!!!</span>VC_preds)) <span class="sc">%&gt;%</span> </span>
<span id="cb54-6"><a href="example-2.html#cb54-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">step_YeoJohnson</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb54-7"><a href="example-2.html#cb54-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">prep</span>(stroke_train <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(Stroke, <span class="sc">!!!</span>VC_preds)) <span class="sc">%&gt;%</span> </span>
<span id="cb54-8"><a href="example-2.html#cb54-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bake</span>(., <span class="at">new_data =</span> <span class="cn">NULL</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-9"><a href="example-2.html#cb54-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">gather</span>(Predictor, value, <span class="sc">-</span>Stroke)</span>
<span id="cb54-10"><a href="example-2.html#cb54-10" aria-hidden="true" tabindex="-1"></a>vc_pred<span class="sc">%&gt;%</span>head</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   Stroke Predictor value
##   &lt;fct&gt;  &lt;chr&gt;     &lt;dbl&gt;
## 1 N      CALCVol    9.51
## 2 N      CALCVol    4.90
## 3 N      CALCVol    7.63
## 4 Y      CALCVol   13.2 
## 5 N      CALCVol    6.93
## 6 N      CALCVol    2.27</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="example-2.html#cb56-1" aria-hidden="true" tabindex="-1"></a>pred_max <span class="ot">&lt;-</span> </span>
<span id="cb56-2"><a href="example-2.html#cb56-2" aria-hidden="true" tabindex="-1"></a>  vc_pred <span class="sc">%&gt;%</span> </span>
<span id="cb56-3"><a href="example-2.html#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Predictor) <span class="sc">%&gt;%</span> </span>
<span id="cb56-4"><a href="example-2.html#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">max_val =</span> <span class="fu">max</span>(value)) <span class="sc">%&gt;%</span> </span>
<span id="cb56-5"><a href="example-2.html#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(one_predictor_res <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(Pvalue, Predictor)) <span class="sc">%&gt;%</span> </span>
<span id="cb56-6"><a href="example-2.html#cb56-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb56-7"><a href="example-2.html#cb56-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fl">1.5</span>, </span>
<span id="cb56-8"><a href="example-2.html#cb56-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fl">1.25</span> <span class="sc">*</span> max_val,</span>
<span id="cb56-9"><a href="example-2.html#cb56-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">&quot;p-value: &quot;</span>, <span class="fu">format.pval</span>(Pvalue, <span class="at">digits =</span> <span class="dv">2</span>, <span class="at">sci =</span> <span class="cn">FALSE</span>, <span class="at">eps =</span> .<span class="dv">0001</span>))</span>
<span id="cb56-10"><a href="example-2.html#cb56-10" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## Joining, by = &quot;Predictor&quot;</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="example-2.html#cb58-1" aria-hidden="true" tabindex="-1"></a>pred_max<span class="sc">%&gt;%</span>head</span></code></pre></div>
<pre><code>## # A tibble: 6 × 6
##   Predictor     max_val   Pvalue     x     value label           
##   &lt;chr&gt;           &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;           
## 1 CALCVol        15.7   0.000872   1.5    19.6   p-value: 0.00087
## 2 CALCVolProp     0.440 0.000856   1.5     0.550 p-value: 0.00086
## 3 LRNCVol        23.2   1.00       1.5    29.0   p-value: 1.00000
## 4 LRNCVolProp     0.495 0.207      1.5     0.618 p-value: 0.20723
## 5 MATXVol     41681.    1.00       1.5 52101.    p-value: 1.00000
## 6 MATXVolProp     0.870 1.00       1.5     1.09  p-value: 1.00000</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="example-2.html#cb60-1" aria-hidden="true" tabindex="-1"></a>new_order <span class="ot">&lt;-</span> pred_max<span class="sc">$</span>Predictor[<span class="fu">order</span>(pred_max<span class="sc">$</span>Pvalue)]</span>
<span id="cb60-2"><a href="example-2.html#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="example-2.html#cb60-3" aria-hidden="true" tabindex="-1"></a>vc_pred <span class="ot">&lt;-</span> </span>
<span id="cb60-4"><a href="example-2.html#cb60-4" aria-hidden="true" tabindex="-1"></a>  vc_pred <span class="sc">%&gt;%</span> </span>
<span id="cb60-5"><a href="example-2.html#cb60-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Predictor =</span> <span class="fu">factor</span>(Predictor, <span class="at">levels =</span> new_order))</span>
<span id="cb60-6"><a href="example-2.html#cb60-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-7"><a href="example-2.html#cb60-7" aria-hidden="true" tabindex="-1"></a>pred_max <span class="ot">&lt;-</span> </span>
<span id="cb60-8"><a href="example-2.html#cb60-8" aria-hidden="true" tabindex="-1"></a>  pred_max <span class="sc">%&gt;%</span> </span>
<span id="cb60-9"><a href="example-2.html#cb60-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Predictor =</span> <span class="fu">factor</span>(Predictor, <span class="at">levels =</span> new_order))</span>
<span id="cb60-10"><a href="example-2.html#cb60-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-11"><a href="example-2.html#cb60-11" aria-hidden="true" tabindex="-1"></a>fig_2_4 <span class="ot">&lt;-</span></span>
<span id="cb60-12"><a href="example-2.html#cb60-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(vc_pred, <span class="fu">aes</span>(<span class="at">x =</span> Stroke, <span class="at">y =</span> value)) <span class="sc">+</span> </span>
<span id="cb60-13"><a href="example-2.html#cb60-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb60-14"><a href="example-2.html#cb60-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">cex =</span> .<span class="dv">5</span>) <span class="sc">+</span> </span>
<span id="cb60-15"><a href="example-2.html#cb60-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> pred_max, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">label =</span> label), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb60-16"><a href="example-2.html#cb60-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Predictor, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>) <span class="sc">+</span> </span>
<span id="cb60-17"><a href="example-2.html#cb60-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;&quot;</span>)</span>
<span id="cb60-18"><a href="example-2.html#cb60-18" aria-hidden="true" tabindex="-1"></a>fig_2_4</span></code></pre></div>
<p><img src="bookclub-feat_eng_files/figure-html/02-illustrative-example-predicting-risk-of-ischemic-stroke-28-1.png" width="672" /></p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="example-2.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Figure 2.5</span></span>
<span id="cb61-2"><a href="example-2.html#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="co"># https://bookdown.org/max/FES/stroke-tour.html#fig:stroke-maxRemodelingRatioROC</span></span>
<span id="cb61-3"><a href="example-2.html#cb61-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-4"><a href="example-2.html#cb61-4" aria-hidden="true" tabindex="-1"></a>fig_2_5 <span class="ot">&lt;-</span> </span>
<span id="cb61-5"><a href="example-2.html#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">roc_curve</span>(stroke_train, Stroke, MaxRemodelingRatio) <span class="sc">%&gt;%</span> </span>
<span id="cb61-6"><a href="example-2.html#cb61-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># used opposite values</span></span>
<span id="cb61-7"><a href="example-2.html#cb61-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> specificity, <span class="at">y =</span> <span class="dv">1</span><span class="sc">-</span>sensitivity)) <span class="sc">+</span> </span>
<span id="cb61-8"><a href="example-2.html#cb61-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">alpha =</span> .<span class="dv">5</span>, <span class="at">lty =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb61-9"><a href="example-2.html#cb61-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>()</span>
<span id="cb61-10"><a href="example-2.html#cb61-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-11"><a href="example-2.html#cb61-11" aria-hidden="true" tabindex="-1"></a>fig_2_5</span></code></pre></div>
<p><img src="bookclub-feat_eng_files/figure-html/02-illustrative-example-predicting-risk-of-ischemic-stroke-29-1.png" width="672" /></p>
</div>
<div id="interaction-exploration" class="section level3 hasAnchor" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> Interaction exploration<a href="example-2.html#interaction-exploration" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here they create all the pairs of all of the image analysis components
there are 171 interactions</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="example-2.html#cb62-1" aria-hidden="true" tabindex="-1"></a>pairs <span class="ot">&lt;-</span> </span>
<span id="cb62-2"><a href="example-2.html#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">combn</span>(VC_preds, <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb62-3"><a href="example-2.html#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb62-4"><a href="example-2.html#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>(<span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb62-5"><a href="example-2.html#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb62-6"><a href="example-2.html#cb62-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Improvement =</span> <span class="cn">NA</span>,</span>
<span id="cb62-7"><a href="example-2.html#cb62-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Pvalue =</span> <span class="cn">NA</span>,</span>
<span id="cb62-8"><a href="example-2.html#cb62-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">ROC =</span> <span class="cn">NA</span></span>
<span id="cb62-9"><a href="example-2.html#cb62-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>Run comparisons with caret</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="example-2.html#cb63-1" aria-hidden="true" tabindex="-1"></a>retained_pairs <span class="ot">&lt;-</span> </span>
<span id="cb63-2"><a href="example-2.html#cb63-2" aria-hidden="true" tabindex="-1"></a>  pairs1 <span class="sc">%&gt;%</span> </span>
<span id="cb63-3"><a href="example-2.html#cb63-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(ROC <span class="sc">&gt;</span> <span class="fl">0.5</span>  <span class="sc">&amp;</span> Pvalue <span class="sc">&lt;=</span> <span class="fl">0.2</span>)</span>
<span id="cb63-4"><a href="example-2.html#cb63-4" aria-hidden="true" tabindex="-1"></a>retained_pairs<span class="sc">%&gt;%</span>head</span></code></pre></div>
<pre><code>##        V1                    V2 Improvement      Pvalue     ROC
## 1 MATXVol   MaxMaxWallThickness     0.07635 0.001903838 0.65435
## 2 MATXVol    MaxRemodelingRatio     0.11085 0.001345363 0.55150
## 3 MATXVol     MaxStenosisByArea     0.02325 0.086210254 0.60960
## 4 MATXVol MaxStenosisByDiameter     0.01930 0.197228736 0.61550
## 5 LRNCVol           MaxMATXArea     0.02590 0.152003535 0.55690
## 6 LRNCVol    MaxRemodelingRatio     0.03345 0.119774508 0.59510</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="example-2.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Figure 2.6</span></span>
<span id="cb65-2"><a href="example-2.html#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="co"># https://bookdown.org/max/FES/stroke-tour.html#fig:stroke-interactionScreening</span></span>
<span id="cb65-3"><a href="example-2.html#cb65-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-4"><a href="example-2.html#cb65-4" aria-hidden="true" tabindex="-1"></a>vol_plot <span class="ot">&lt;-</span> </span>
<span id="cb65-5"><a href="example-2.html#cb65-5" aria-hidden="true" tabindex="-1"></a>  pairs1 <span class="sc">%&gt;%</span> </span>
<span id="cb65-6"><a href="example-2.html#cb65-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(ROC <span class="sc">&gt;</span> <span class="fl">0.5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb65-7"><a href="example-2.html#cb65-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Term =</span> <span class="fu">paste</span>(V1, <span class="st">&quot;by&quot;</span>, V2, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">ROC:&quot;</span>, <span class="fu">round</span>(ROC, <span class="dv">2</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb65-8"><a href="example-2.html#cb65-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Improvement, <span class="at">y =</span> <span class="sc">-</span><span class="fu">log10</span>(Pvalue))) <span class="sc">+</span> </span>
<span id="cb65-9"><a href="example-2.html#cb65-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Improvement&quot;</span>) <span class="sc">+</span></span>
<span id="cb65-10"><a href="example-2.html#cb65-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">2</span>, <span class="fu">aes</span>(<span class="at">size =</span> ROC, <span class="at">text =</span> Term))</span>
<span id="cb65-11"><a href="example-2.html#cb65-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-12"><a href="example-2.html#cb65-12" aria-hidden="true" tabindex="-1"></a>vol_plot <span class="ot">&lt;-</span> <span class="fu">ggplotly</span>(vol_plot, <span class="at">tooltip =</span> <span class="st">&quot;Term&quot;</span>)</span>
<span id="cb65-13"><a href="example-2.html#cb65-13" aria-hidden="true" tabindex="-1"></a>vol_plot</span></code></pre></div>
<div id="htmlwidget-68c046434189dc617381" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-68c046434189dc617381">{"x":{"data":[{"x":[-0.03475,-0.02635,-0.03645,-0.00565,-0.00275,-0.07385,-0.0252,-0.01455,-0.0191,-0.01235,-0.0257,-0.0122,-0.02465,-0.0113,-0.02535,-0.0295,-0.02145,-0.02915,-0.04305,-0.023,-0.02655,-0.03905,-0.01745,-0.0114,-0.0208,-0.00195,-0.008,-0.0267,-0.0103,-0.00655,-0.0453,-0.022,-0.05845,-0.0342,-0.0331,-0.03445,-0.0242,-0.0393,0.07635,0.11085,0.02325,-0.04825,0.0193,-0.01855,-0.00455,-0.04055,-0.0374,-0.000149999999999996,-0.0121,-0.01585,-0.0345,-0.0266,-0.0034,0.00405,-0.00335,0.0259,-0.02025,-0.0604,0.03345,-0.034,-0.0036,-0.02875,-0.0151,-0.01315,-0.00490000000000001,-0.0234,-0.0163,-0.03255,-0.0127,-0.02985,-0.0471,-0.0279,-0.0129,-0.01925,-0.02265,-0.00275,-0.0391,0.00375,0.0032,-0.0184,-0.0166,-0.01715,-0.0251,-0.0211,-0.0046,-0.0048,0.02275,-0.0182,-0.01575,0.0016,0.014,-0.0271,-0.01015,-0.04745,-0.0286,-0.0115,-0.0055,0.02225,0.0204,-0.0206,-0.00525,0.00375,0.01535,-0.0086,-0.0132,-0.000449999999999995,0.000300000000000005,-0.03805,-0.0155,-0.0225,-0.0255,0.055,0.00594999999999999,0.0357,-0.00225,0.03165,0.003,0.00625,-0.01565,9.99999999999984e-05,-0.00755,-0.0095,-0.0069,-0.0046,-0.02405,-0.01355,-0.0205,-0.013,-0.0213,-0.02135,0.02875,0.0024,0.062,0.0019,-0.0188,0.01845,0.05835,-0.0055,-0.0215,0.02275,0.0207,-0.04065,-0.0112,0.01205],"y":[0.017211781261297,0.00205873487675918,0.00164280858943912,0.220121636372605,0.244645041254509,0.00055797922125982,0.00405868438909998,0.0965340094230431,0.0689194985554627,0.0548544702300596,0.0210288966751241,0.0464524917613669,0.0011961645636182,0.140858986130303,0.000852892656439494,0.0437765285514497,0.000280584540047969,0.000275587425996755,0.000405146396465443,0.0644939626275377,0.0104037418281674,0.000809614746395549,0.0256387907109795,0.125692727109415,0.00622151618177767,0.257868084250597,0.119799746516311,0.0013348567102988,0.00995661113897334,0.143686129275296,0.00051837193454391,0.00631900637205408,0.000415512077819206,0.000574291459054509,0.0254408439828405,0.00767771592231294,0.0603140251640206,0.00315677141667967,2.72036996398676,2.87116044685219,1.06444107283443,0.000235610410431452,0.705029808496974,0.0743250703564419,0.202875860300641,0.005705228351396,0.0116325352202791,0.295778167107817,0.166200305248163,0.012802127855571,0.0245971247931209,0.000832891943879728,0.213970767493239,0.359566891738142,0.232562911737252,0.818146310883264,0.00114347208708486,0.000160108139435295,0.92163560314176,0.000783189465160507,0.25195062871633,0.00102346199232288,0.0393359164376219,0.0235038033721234,0.212670169596815,0.00877915757223667,0.0609285902879602,0.00419746543333051,0.147905302239305,0.00103687616872139,0.00978737730607361,0.00270283297841198,0.03927519860828,0.0358315144379098,0.0198344060607309,0.234705845001427,0.00917095057903488,0.517330596443399,0.667002830679877,0.00192821806554749,0.000903464660574835,0.0446561473704756,0.088654087508465,0.000648094980287462,0.215807924956379,0.100496857697624,0.817459413592271,0.00275291198452036,0.0461117174517724,0.475067415242867,0.895599093485193,4.92355332984209e-05,0.019026746644517,0.00670322741184044,5.18220382506038e-05,0.131654971915255,0.115142657263075,1.54737386332689,0.86226443130304,0.029905075682066,0.204967920806517,0.400026162665969,0.547929705453535,0.0820143995620235,0.12837260426855,0.293728474576597,0.307198290133083,0.00219887564717973,0.0128315037106206,0.0981337160818171,0.00113620580939352,1.97615570966468,0.496979859391244,1.10777600645537,0.224778578616318,0.998075558164436,0.386961000366222,0.480473047120601,0.0729689182052345,0.306315852588408,0.0211434046797206,0.0614231811689428,0.14021586291864,0.1617909575158,0.00662881735974123,0.110459582995794,0.00876207703577855,0.0727343718590284,0.00924033421153281,0.00256549312284661,0.868092818411065,0.360603145674664,2.22618399418865,0.327537257754938,0.0304382443414024,0.894770140571576,1.36673735230334,0.160146764019407,0.0196786011329277,1.33800543879618,0.676692607210263,0.0200983900209992,0.0252213926135906,0.59697724933367],"text":["CALCVol by CALCVolProp <br />ROC: 0.55","CALCVol by MATXVol <br />ROC: 0.51","CALCVol by MATXVolProp <br />ROC: 0.56","CALCVol by LRNCVol <br />ROC: 0.53","CALCVol by LRNCVolProp <br />ROC: 0.52","CALCVol by MaxCALCArea <br />ROC: 0.58","CALCVol by MaxCALCAreaProp <br />ROC: 0.6","CALCVol by MaxDilationByArea <br />ROC: 0.54","CALCVol by MaxMATXArea <br />ROC: 0.59","CALCVol by MaxMATXAreaProp <br />ROC: 0.5","CALCVol by MaxLRNCArea <br />ROC: 0.59","CALCVol by MaxLRNCAreaProp <br />ROC: 0.53","CALCVol by MaxMaxWallThickness <br />ROC: 0.68","CALCVol by MaxRemodelingRatio <br />ROC: 0.63","CALCVol by MaxStenosisByArea <br />ROC: 0.62","CALCVol by MaxWallArea <br />ROC: 0.6","CALCVol by MaxStenosisByDiameter <br />ROC: 0.64","CALCVolProp by MATXVol <br />ROC: 0.53","CALCVolProp by MATXVolProp <br />ROC: 0.55","CALCVolProp by LRNCVol <br />ROC: 0.54","CALCVolProp by LRNCVolProp <br />ROC: 0.56","CALCVolProp by MaxCALCArea <br />ROC: 0.57","CALCVolProp by MaxCALCAreaProp <br />ROC: 0.58","CALCVolProp by MaxDilationByArea <br />ROC: 0.55","CALCVolProp by MaxMATXArea <br />ROC: 0.6","CALCVolProp by MaxMATXAreaProp <br />ROC: 0.51","CALCVolProp by MaxLRNCArea <br />ROC: 0.6","CALCVolProp by MaxLRNCAreaProp <br />ROC: 0.54","CALCVolProp by MaxMaxWallThickness <br />ROC: 0.66","CALCVolProp by MaxRemodelingRatio <br />ROC: 0.63","CALCVolProp by MaxStenosisByArea <br />ROC: 0.64","CALCVolProp by MaxWallArea <br />ROC: 0.6","CALCVolProp by WallVol <br />ROC: 0.53","CALCVolProp by MaxStenosisByDiameter <br />ROC: 0.62","MATXVol by MaxCALCArea <br />ROC: 0.54","MATXVol by MaxCALCAreaProp <br />ROC: 0.55","MATXVol by MaxMATXArea <br />ROC: 0.55","MATXVol by MaxLRNCArea <br />ROC: 0.53","MATXVol by MaxMaxWallThickness <br />ROC: 0.65","MATXVol by MaxRemodelingRatio <br />ROC: 0.55","MATXVol by MaxStenosisByArea <br />ROC: 0.61","MATXVol by MaxWallArea <br />ROC: 0.55","MATXVol by MaxStenosisByDiameter <br />ROC: 0.62","MATXVolProp by MaxCALCArea <br />ROC: 0.57","MATXVolProp by MaxCALCAreaProp <br />ROC: 0.57","MATXVolProp by MaxMATXArea <br />ROC: 0.55","MATXVolProp by MaxLRNCArea <br />ROC: 0.58","MATXVolProp by MaxMaxWallThickness <br />ROC: 0.67","MATXVolProp by MaxRemodelingRatio <br />ROC: 0.59","MATXVolProp by MaxStenosisByArea <br />ROC: 0.58","MATXVolProp by MaxWallArea <br />ROC: 0.57","MATXVolProp by MaxStenosisByDiameter <br />ROC: 0.6","LRNCVol by LRNCVolProp <br />ROC: 0.52","LRNCVol by MaxCALCArea <br />ROC: 0.54","LRNCVol by MaxCALCAreaProp <br />ROC: 0.57","LRNCVol by MaxMATXArea <br />ROC: 0.56","LRNCVol by MaxLRNCArea <br />ROC: 0.66","LRNCVol by MaxMaxWallThickness <br />ROC: 0.68","LRNCVol by MaxRemodelingRatio <br />ROC: 0.6","LRNCVol by MaxStenosisByArea <br />ROC: 0.6","LRNCVol by MaxWallArea <br />ROC: 0.57","LRNCVol by MaxStenosisByDiameter <br />ROC: 0.61","LRNCVolProp by MaxCALCArea <br />ROC: 0.57","LRNCVolProp by MaxCALCAreaProp <br />ROC: 0.61","LRNCVolProp by MaxMATXArea <br />ROC: 0.55","LRNCVolProp by MaxLRNCArea <br />ROC: 0.58","LRNCVolProp by MaxLRNCAreaProp <br />ROC: 0.55","LRNCVolProp by MaxMaxWallThickness <br />ROC: 0.68","LRNCVolProp by MaxRemodelingRatio <br />ROC: 0.59","LRNCVolProp by MaxStenosisByArea <br />ROC: 0.6","LRNCVolProp by MaxWallArea <br />ROC: 0.58","LRNCVolProp by MaxStenosisByDiameter <br />ROC: 0.61","MaxCALCArea by MaxCALCAreaProp <br />ROC: 0.58","MaxCALCArea by MaxDilationByArea <br />ROC: 0.55","MaxCALCArea by MaxMATXArea <br />ROC: 0.58","MaxCALCArea by MaxMATXAreaProp <br />ROC: 0.53","MaxCALCArea by MaxLRNCArea <br />ROC: 0.6","MaxCALCArea by MaxLRNCAreaProp <br />ROC: 0.54","MaxCALCArea by MaxMaxWallThickness <br />ROC: 0.66","MaxCALCArea by MaxRemodelingRatio <br />ROC: 0.63","MaxCALCArea by MaxStenosisByArea <br />ROC: 0.63","MaxCALCArea by MaxWallArea <br />ROC: 0.58","MaxCALCArea by WallVol <br />ROC: 0.54","MaxCALCArea by MaxStenosisByDiameter <br />ROC: 0.62","MaxCALCAreaProp by MaxDilationByArea <br />ROC: 0.56","MaxCALCAreaProp by MaxMATXArea <br />ROC: 0.6","MaxCALCAreaProp by MaxMATXAreaProp <br />ROC: 0.55","MaxCALCAreaProp by MaxLRNCArea <br />ROC: 0.64","MaxCALCAreaProp by MaxLRNCAreaProp <br />ROC: 0.57","MaxCALCAreaProp by MaxMaxWallThickness <br />ROC: 0.69","MaxCALCAreaProp by MaxRemodelingRatio <br />ROC: 0.66","MaxCALCAreaProp by MaxStenosisByArea <br />ROC: 0.66","MaxCALCAreaProp by MaxWallArea <br />ROC: 0.61","MaxCALCAreaProp by WallVol <br />ROC: 0.56","MaxCALCAreaProp by MaxStenosisByDiameter <br />ROC: 0.65","MaxDilationByArea by MaxMATXArea <br />ROC: 0.6","MaxDilationByArea by MaxLRNCArea <br />ROC: 0.56","MaxDilationByArea by MaxMaxWallThickness <br />ROC: 0.65","MaxDilationByArea by MaxRemodelingRatio <br />ROC: 0.68","MaxDilationByArea by MaxStenosisByArea <br />ROC: 0.59","MaxDilationByArea by MaxWallArea <br />ROC: 0.6","MaxDilationByArea by MaxStenosisByDiameter <br />ROC: 0.6","MaxMATXArea by MaxMATXAreaProp <br />ROC: 0.58","MaxMATXArea by MaxLRNCArea <br />ROC: 0.58","MaxMATXArea by MaxLRNCAreaProp <br />ROC: 0.54","MaxMATXArea by MaxMaxWallThickness <br />ROC: 0.66","MaxMATXArea by MaxRemodelingRatio <br />ROC: 0.61","MaxMATXArea by MaxStenosisByArea <br />ROC: 0.65","MaxMATXArea by MaxWallArea <br />ROC: 0.58","MaxMATXArea by WallVol <br />ROC: 0.53","MaxMATXArea by MaxStenosisByDiameter <br />ROC: 0.66","MaxMATXAreaProp by MaxLRNCArea <br />ROC: 0.57","MaxMATXAreaProp by MaxMaxWallThickness <br />ROC: 0.65","MaxMATXAreaProp by MaxRemodelingRatio <br />ROC: 0.63","MaxMATXAreaProp by MaxStenosisByArea <br />ROC: 0.61","MaxMATXAreaProp by MaxWallArea <br />ROC: 0.58","MaxMATXAreaProp by MaxStenosisByDiameter <br />ROC: 0.63","MaxLRNCArea by MaxLRNCAreaProp <br />ROC: 0.65","MaxLRNCArea by MaxMaxWallThickness <br />ROC: 0.66","MaxLRNCArea by MaxRemodelingRatio <br />ROC: 0.64","MaxLRNCArea by MaxStenosisByArea <br />ROC: 0.63","MaxLRNCArea by MaxWallArea <br />ROC: 0.59","MaxLRNCArea by WallVol <br />ROC: 0.53","MaxLRNCArea by MaxStenosisByDiameter <br />ROC: 0.64","MaxLRNCAreaProp by MaxMaxWallThickness <br />ROC: 0.65","MaxLRNCAreaProp by MaxRemodelingRatio <br />ROC: 0.6","MaxLRNCAreaProp by MaxStenosisByArea <br />ROC: 0.63","MaxLRNCAreaProp by MaxWallArea <br />ROC: 0.57","MaxLRNCAreaProp by MaxStenosisByDiameter <br />ROC: 0.62","MaxMaxWallThickness by MaxRemodelingRatio <br />ROC: 0.71","MaxMaxWallThickness by MaxStenosisByArea <br />ROC: 0.66","MaxMaxWallThickness by MaxWallArea <br />ROC: 0.66","MaxMaxWallThickness by WallVol <br />ROC: 0.65","MaxMaxWallThickness by MaxStenosisByDiameter <br />ROC: 0.68","MaxRemodelingRatio by MaxStenosisByArea <br />ROC: 0.65","MaxRemodelingRatio by MaxWallArea <br />ROC: 0.6","MaxRemodelingRatio by WallVol <br />ROC: 0.57","MaxRemodelingRatio by MaxStenosisByDiameter <br />ROC: 0.66","MaxStenosisByArea by MaxWallArea <br />ROC: 0.66","MaxStenosisByArea by WallVol <br />ROC: 0.61","MaxStenosisByArea by MaxStenosisByDiameter <br />ROC: 0.56","MaxWallArea by WallVol <br />ROC: 0.55","MaxWallArea by MaxStenosisByDiameter <br />ROC: 0.66","WallVol by MaxStenosisByDiameter <br />ROC: 0.62"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":0.2,"size":[12.7908135520207,5.61993199456359,13.2650410370989,10.9012884979567,8.7894371557704,15.3519200446449,16.4310746217856,12.1772010018579,16.1429099439199,3.77952755905512,15.6738993632964,10.6908684201504,21.0490812196018,18.7194220165435,18.1354081354687,16.4858731329827,18.9043001343778,10.4086528330551,13.117397573945,11.470026624467,13.2512972286563,14.671494573378,15.3218618315818,12.4168185186088,16.8895629736129,7.64448922879289,16.7262435850395,11.3447843673314,20.4450985325207,18.4347706275496,19.0101590986869,16.8264777214188,10.7968672034328,18.2228620557441,11.7418983484984,13.1266936140917,12.9626543939129,11.0162118068734,19.9478222248351,12.8771397103864,17.3325498810848,13.1776574746496,17.7054935199096,14.3723629754823,14.1779065813587,12.3765042217078,15.4416298560646,20.9076906818757,15.703070153407,15.6080020595348,14.671494573378,16.6792011184652,9.50157748604626,11.8286842448307,14.3395168951161,13.3788075586307,20.1267779921403,21.031470773529,16.3691411937721,16.8530770358038,14.571364051191,17.0443270086884,14.4905856962567,17.3645523396242,12.7133789392512,15.0400203181292,12.2902023003365,21.4738363593536,15.8550607461958,16.8994960742282,14.9431957111035,17.6084908910779,15.063134593754,12.3156757926266,15.3030356336443,10.864609656993,16.3898194671671,12.2184674589328,20.4320653163459,18.437733377619,18.8179215149771,15.4899357279161,12.0469158216114,18.1233036808911,14.0518609653344,16.8928748431655,12.8819116027425,19.1096231846984,14.5633134447052,21.5252983452882,20.1559719036608,20.0388817520146,17.6147696488734,13.5091103234521,19.7505581313329,16.9852699777894,13.473339677487,19.5342980158225,21.390198118341,15.7575739081132,16.7363018924165,16.3656915119332,15.2652906646516,15.4379057294178,11.834077315242,20.2326893716359,17.421967586327,19.6112851362069,15.4229973113366,10.6908684201504,20.0522298818326,14.6914104192547,19.6332127887894,18.6114881428789,17.5550059047287,15.2577267763729,18.3575277787639,19.9505077650356,20.3248056898787,18.9100411756077,18.8150336812576,15.9980560573113,10.3823987684223,19.2506055120477,19.8400323920461,16.655615434659,18.3068007794334,14.1444442933898,17.7615088046408,22.6771653543307,20.2300498975173,20.1108320441738,19.7315142247204,21.3234954721057,19.5067112840005,16.3829304789949,14.5350888679073,20.4424927048175,20.0575660689978,17.421967586327,13.4598916079577,12.6646396155343,20.340545612383,18.1111890029511],"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":31.4155251141553},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.083085,0.120085],"tickmode":"array","ticktext":["-0.05","0.00","0.05","0.10"],"tickvals":[-0.05,0,0.05,0.1],"categoryorder":"array","categoryarray":["-0.05","0.00","0.05","0.10"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Improvement","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.143506325032646,3.01471600741813],"tickmode":"array","ticktext":["0","1","2","3"],"tickvals":[0,1,2,3],"categoryorder":"array","categoryarray":["0","1","2","3"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"-log10(Pvalue)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"ROC","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"cfb84ccbf0e1":{"x":{},"y":{},"size":{},"text":{},"type":"scatter"}},"cur_data":"cfb84ccbf0e1","visdat":{"cfb84ccbf0e1":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Create interaction formula of things that matter most</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="example-2.html#cb66-1" aria-hidden="true" tabindex="-1"></a>int_form <span class="ot">&lt;-</span> </span>
<span id="cb66-2"><a href="example-2.html#cb66-2" aria-hidden="true" tabindex="-1"></a>  pairs1 <span class="sc">%&gt;%</span> </span>
<span id="cb66-3"><a href="example-2.html#cb66-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(ROC <span class="sc">&gt;</span> <span class="fl">0.5</span>  <span class="sc">&amp;</span> Pvalue <span class="sc">&lt;=</span> <span class="fl">0.2</span> <span class="sc">&amp;</span> Improvement <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb66-4"><a href="example-2.html#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">form  =</span> <span class="fu">paste0</span>(V1, <span class="st">&quot;:&quot;</span>, V2)) <span class="sc">%&gt;%</span> </span>
<span id="cb66-5"><a href="example-2.html#cb66-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(form) <span class="sc">%&gt;%</span> </span>
<span id="cb66-6"><a href="example-2.html#cb66-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">&quot;+&quot;</span>)</span>
<span id="cb66-7"><a href="example-2.html#cb66-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-8"><a href="example-2.html#cb66-8" aria-hidden="true" tabindex="-1"></a>int_form <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;~&quot;</span>, int_form)</span>
<span id="cb66-9"><a href="example-2.html#cb66-9" aria-hidden="true" tabindex="-1"></a>int_form <span class="ot">&lt;-</span> <span class="fu">as.formula</span>(int_form)</span>
<span id="cb66-10"><a href="example-2.html#cb66-10" aria-hidden="true" tabindex="-1"></a>int_form<span class="sc">%&gt;%</span>head</span></code></pre></div>
<pre><code>## ~MATXVol:MaxMaxWallThickness + MATXVol:MaxRemodelingRatio + MATXVol:MaxStenosisByArea + 
##     MATXVol:MaxStenosisByDiameter + LRNCVol:MaxMATXArea + LRNCVol:MaxRemodelingRatio + 
##     MaxCALCAreaProp:MaxMATXAreaProp + MaxCALCAreaProp:MaxRemodelingRatio + 
##     MaxDilationByArea:MaxMaxWallThickness + MaxDilationByArea:MaxRemodelingRatio + 
##     MaxMATXAreaProp:MaxLRNCArea + MaxMATXAreaProp:MaxRemodelingRatio + 
##     MaxMATXAreaProp:MaxWallArea + MaxMaxWallThickness:MaxStenosisByArea + 
##     MaxMaxWallThickness:WallVol + MaxRemodelingRatio:MaxWallArea + 
##     MaxRemodelingRatio:WallVol + MaxStenosisByArea:WallVol</code></pre>
<p>This part of the script is to work through all of of the potential models:</p>
<ul>
<li>original risk set alone</li>
<li>imaging predictors alone</li>
<li>risk and imaging predictors together</li>
<li>imaging predictors and interactions of imaging predictors, and</li>
<li>risk, imaging predictors, and interactions of imaging predictors</li>
</ul>
<p>All the models are run below.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="example-2.html#cb68-1" aria-hidden="true" tabindex="-1"></a>risk_train <span class="ot">&lt;-</span> </span>
<span id="cb68-2"><a href="example-2.html#cb68-2" aria-hidden="true" tabindex="-1"></a>  stroke_train <span class="sc">%&gt;%</span></span>
<span id="cb68-3"><a href="example-2.html#cb68-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">one_of</span>(risk_preds), Stroke)</span>
<span id="cb68-4"><a href="example-2.html#cb68-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-5"><a href="example-2.html#cb68-5" aria-hidden="true" tabindex="-1"></a>risk_train<span class="sc">%&gt;%</span>head</span></code></pre></div>
<pre><code>##   age sex SmokingHistory AtrialFibrillation CoronaryArteryDisease
## 1  72   1              1                  0                     0
## 2  76   1              1                  0                     0
## 4  72   0              0                  0                     0
## 5  61   1              1                  0                     0
## 7  65   1              0                  0                     0
## 8  64   1              1                  0                     1
##   DiabetesHistory HypercholesterolemiaHistory HypertensionHistory Stroke
## 1               0                           0                   1      N
## 2               1                           1                   1      N
## 4               0                           0                   0      N
## 5               1                           1                   1      Y
## 7               0                           0                   1      N
## 8               0                           1                   1      N</code></pre>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="example-2.html#cb70-1" aria-hidden="true" tabindex="-1"></a>image_train <span class="ot">&lt;-</span> </span>
<span id="cb70-2"><a href="example-2.html#cb70-2" aria-hidden="true" tabindex="-1"></a>  stroke_train <span class="sc">%&gt;%</span></span>
<span id="cb70-3"><a href="example-2.html#cb70-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">one_of</span>(VC_preds), Stroke)</span>
<span id="cb70-4"><a href="example-2.html#cb70-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-5"><a href="example-2.html#cb70-5" aria-hidden="true" tabindex="-1"></a>image_train<span class="sc">%&gt;%</span>head</span></code></pre></div>
<pre><code>##      CALCVol CALCVolProp  MATXVol MATXVolProp   LRNCVol LRNCVolProp MaxCALCArea
## 1 235.252599 0.070442702 3156.835   0.7599582 224.87171  0.09108513   12.350494
## 2  31.433595 0.016164769 3032.861   0.8133063 368.56066  0.13398944    7.130660
## 4 113.404823 0.038081488 3835.220   0.7825256 321.15893  0.08303659   16.286916
## 5 780.823789 0.213432061 3518.877   0.7610895 140.51735  0.03206536   63.350869
## 7  84.055774 0.041383842 2990.273   0.7498691 293.26992  0.07539753   17.583561
## 8   5.644322 0.002824946 3359.323   0.8492801  55.76888  0.01983567    2.841252
##   MaxCALCAreaProp MaxDilationByArea MaxMATXArea MaxMATXAreaProp MaxLRNCArea
## 1      0.36576842         520.98259    71.24743       0.9523705   21.686815
## 2      0.21124686          91.72005    27.21084       0.9455539    6.434661
## 4      0.40881121         270.96930    38.12211       0.9459098    5.705054
## 5      0.57620574        2270.45120   341.12089       0.9691989    6.046787
## 7      0.32150685          95.15505    56.57457       0.9213197    7.213451
## 8      0.07734609         298.42121    33.92709       0.9612049    4.595196
##   MaxLRNCAreaProp MaxMaxWallThickness MaxRemodelingRatio MaxStenosisByArea
## 1       0.4295781            2.409943           5.697931          18.99554
## 2       0.2815101            2.540334           1.739927          30.23761
## 4       0.1547786            3.708515           2.831636          33.93906
## 5       0.1870965            6.115838          15.647750          34.30985
## 7       0.2169263            3.975168           1.912069          36.59954
## 8       0.2053274            2.581908           2.181675          40.31766
##   MaxWallArea  WallVol MaxStenosisByDiameter Stroke
## 1   106.20676 4192.170              10.54411      N
## 2    33.36714 3917.040              18.64620      N
## 4    55.34671 4935.327              19.73511      N
## 5   426.47858 4909.504              20.28832      Y
## 7    59.82696 4045.053              49.29705      N
## 8    34.79742 3960.832              30.50857      N</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="example-2.html#cb72-1" aria-hidden="true" tabindex="-1"></a>fiveStats <span class="ot">&lt;-</span> <span class="cf">function</span>(...) <span class="fu">c</span>(<span class="fu">twoClassSummary</span>(...), <span class="fu">defaultSummary</span>(...))</span>
<span id="cb72-2"><a href="example-2.html#cb72-2" aria-hidden="true" tabindex="-1"></a>internal_ctrl <span class="ot">=</span> <span class="fu">trainControl</span>(<span class="at">method =</span> <span class="st">&quot;none&quot;</span>, <span class="at">classProbs =</span> <span class="cn">TRUE</span>,</span>
<span id="cb72-3"><a href="example-2.html#cb72-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">allowParallel =</span> <span class="cn">FALSE</span>)</span>
<span id="cb72-4"><a href="example-2.html#cb72-4" aria-hidden="true" tabindex="-1"></a>lrFuncsNew <span class="ot">&lt;-</span> caretFuncs  </span>
<span id="cb72-5"><a href="example-2.html#cb72-5" aria-hidden="true" tabindex="-1"></a>lrFuncsNew<span class="sc">$</span>summary <span class="ot">&lt;-</span> fiveStats</span>
<span id="cb72-6"><a href="example-2.html#cb72-6" aria-hidden="true" tabindex="-1"></a>rfeCtrl <span class="ot">&lt;-</span> <span class="fu">rfeControl</span>(<span class="at">functions =</span> lrFuncsNew,</span>
<span id="cb72-7"><a href="example-2.html#cb72-7" aria-hidden="true" tabindex="-1"></a>                      <span class="at">method =</span> <span class="st">&quot;repeatedcv&quot;</span>,</span>
<span id="cb72-8"><a href="example-2.html#cb72-8" aria-hidden="true" tabindex="-1"></a>                      <span class="at">repeats =</span> <span class="dv">5</span>,</span>
<span id="cb72-9"><a href="example-2.html#cb72-9" aria-hidden="true" tabindex="-1"></a>                      <span class="at">rerank =</span> <span class="cn">FALSE</span>,</span>
<span id="cb72-10"><a href="example-2.html#cb72-10" aria-hidden="true" tabindex="-1"></a>                      <span class="at">returnResamp =</span> <span class="st">&quot;all&quot;</span>,</span>
<span id="cb72-11"><a href="example-2.html#cb72-11" aria-hidden="true" tabindex="-1"></a>                      <span class="at">saveDetails =</span> <span class="cn">TRUE</span>,</span>
<span id="cb72-12"><a href="example-2.html#cb72-12" aria-hidden="true" tabindex="-1"></a>                      <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>RFE procedure using risk predictors</p>
<p>All pair-wise interactions.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="example-2.html#cb73-1" aria-hidden="true" tabindex="-1"></a>risk_int_filtered_recipe <span class="ot">&lt;-</span></span>
<span id="cb73-2"><a href="example-2.html#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">recipe</span>(Stroke <span class="sc">~</span> ., <span class="at">data =</span> risk_train) <span class="sc">%&gt;%</span></span>
<span id="cb73-3"><a href="example-2.html#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_interact</span>(<span class="sc">~</span> <span class="fu">all_predictors</span>()<span class="sc">:</span><span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb73-4"><a href="example-2.html#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_corr</span>(<span class="fu">all_predictors</span>(), <span class="at">threshold =</span> <span class="fl">0.75</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb73-5"><a href="example-2.html#cb73-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_center</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb73-6"><a href="example-2.html#cb73-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_scale</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb73-7"><a href="example-2.html#cb73-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>())</span></code></pre></div>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="example-2.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">63331</span>)</span>
<span id="cb74-2"><a href="example-2.html#cb74-2" aria-hidden="true" tabindex="-1"></a>risk_int_filtered_rfe <span class="ot">&lt;-</span> <span class="fu">rfe</span>(</span>
<span id="cb74-3"><a href="example-2.html#cb74-3" aria-hidden="true" tabindex="-1"></a>  risk_int_filtered_recipe,</span>
<span id="cb74-4"><a href="example-2.html#cb74-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> risk_train,</span>
<span id="cb74-5"><a href="example-2.html#cb74-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">sizes =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">36</span>,</span>
<span id="cb74-6"><a href="example-2.html#cb74-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">rfeControl =</span> rfeCtrl,</span>
<span id="cb74-7"><a href="example-2.html#cb74-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="st">&quot;ROC&quot;</span>,</span>
<span id="cb74-8"><a href="example-2.html#cb74-8" aria-hidden="true" tabindex="-1"></a>  <span class="do">## train options</span></span>
<span id="cb74-9"><a href="example-2.html#cb74-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb74-10"><a href="example-2.html#cb74-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">trControl =</span> internal_ctrl</span>
<span id="cb74-11"><a href="example-2.html#cb74-11" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="example-2.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Main effects</span></span>
<span id="cb75-2"><a href="example-2.html#cb75-2" aria-hidden="true" tabindex="-1"></a>risk_main_filtered_recipe <span class="ot">&lt;-</span></span>
<span id="cb75-3"><a href="example-2.html#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">recipe</span>(Stroke <span class="sc">~</span> ., <span class="at">data =</span> risk_train) <span class="sc">%&gt;%</span></span>
<span id="cb75-4"><a href="example-2.html#cb75-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_corr</span>(<span class="fu">all_predictors</span>(), <span class="at">threshold =</span> <span class="fl">0.75</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb75-5"><a href="example-2.html#cb75-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_center</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb75-6"><a href="example-2.html#cb75-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_scale</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb75-7"><a href="example-2.html#cb75-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>())</span>
<span id="cb75-8"><a href="example-2.html#cb75-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-9"><a href="example-2.html#cb75-9" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">63331</span>)</span>
<span id="cb75-10"><a href="example-2.html#cb75-10" aria-hidden="true" tabindex="-1"></a>risk_main_filtered_rfe <span class="ot">&lt;-</span> <span class="fu">rfe</span>(</span>
<span id="cb75-11"><a href="example-2.html#cb75-11" aria-hidden="true" tabindex="-1"></a>  risk_main_filtered_recipe,</span>
<span id="cb75-12"><a href="example-2.html#cb75-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> risk_train,</span>
<span id="cb75-13"><a href="example-2.html#cb75-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">sizes =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>,</span>
<span id="cb75-14"><a href="example-2.html#cb75-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">rfeControl =</span> rfeCtrl,</span>
<span id="cb75-15"><a href="example-2.html#cb75-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="st">&quot;ROC&quot;</span>,</span>
<span id="cb75-16"><a href="example-2.html#cb75-16" aria-hidden="true" tabindex="-1"></a>  <span class="do">## train options</span></span>
<span id="cb75-17"><a href="example-2.html#cb75-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb75-18"><a href="example-2.html#cb75-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">trControl =</span> internal_ctrl</span>
<span id="cb75-19"><a href="example-2.html#cb75-19" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>RFE procedure using imaging predictors.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="example-2.html#cb76-1" aria-hidden="true" tabindex="-1"></a>img_int_filtered_recipe <span class="ot">&lt;-</span></span>
<span id="cb76-2"><a href="example-2.html#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">recipe</span>(Stroke <span class="sc">~</span> ., <span class="at">data =</span> image_train) <span class="sc">%&gt;%</span></span>
<span id="cb76-3"><a href="example-2.html#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_interact</span>(int_form)  <span class="sc">%&gt;%</span></span>
<span id="cb76-4"><a href="example-2.html#cb76-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_corr</span>(<span class="fu">all_predictors</span>(), <span class="at">threshold =</span> <span class="fl">0.75</span>) <span class="sc">%&gt;%</span></span>
<span id="cb76-5"><a href="example-2.html#cb76-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_center</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb76-6"><a href="example-2.html#cb76-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_scale</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb76-7"><a href="example-2.html#cb76-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_YeoJohnson</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb76-8"><a href="example-2.html#cb76-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>())</span>
<span id="cb76-9"><a href="example-2.html#cb76-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-10"><a href="example-2.html#cb76-10" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">63331</span>)</span>
<span id="cb76-11"><a href="example-2.html#cb76-11" aria-hidden="true" tabindex="-1"></a>img_int_filtered_rfe <span class="ot">&lt;-</span> <span class="fu">rfe</span>(</span>
<span id="cb76-12"><a href="example-2.html#cb76-12" aria-hidden="true" tabindex="-1"></a>  img_int_filtered_recipe,</span>
<span id="cb76-13"><a href="example-2.html#cb76-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> image_train,</span>
<span id="cb76-14"><a href="example-2.html#cb76-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">sizes =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">35</span>,</span>
<span id="cb76-15"><a href="example-2.html#cb76-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">rfeControl =</span> rfeCtrl,</span>
<span id="cb76-16"><a href="example-2.html#cb76-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="st">&quot;ROC&quot;</span>,</span>
<span id="cb76-17"><a href="example-2.html#cb76-17" aria-hidden="true" tabindex="-1"></a>  <span class="do">## train options</span></span>
<span id="cb76-18"><a href="example-2.html#cb76-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb76-19"><a href="example-2.html#cb76-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">trControl =</span> internal_ctrl</span>
<span id="cb76-20"><a href="example-2.html#cb76-20" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="example-2.html#cb77-1" aria-hidden="true" tabindex="-1"></a>img_main_filtered_recipe <span class="ot">&lt;-</span></span>
<span id="cb77-2"><a href="example-2.html#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">recipe</span>(Stroke <span class="sc">~</span> ., <span class="at">data =</span> image_train)  <span class="sc">%&gt;%</span></span>
<span id="cb77-3"><a href="example-2.html#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_corr</span>(<span class="fu">all_predictors</span>(), <span class="at">threshold =</span> <span class="fl">0.75</span>) <span class="sc">%&gt;%</span></span>
<span id="cb77-4"><a href="example-2.html#cb77-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_center</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb77-5"><a href="example-2.html#cb77-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_scale</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb77-6"><a href="example-2.html#cb77-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_YeoJohnson</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb77-7"><a href="example-2.html#cb77-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>())</span>
<span id="cb77-8"><a href="example-2.html#cb77-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-9"><a href="example-2.html#cb77-9" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">63331</span>)</span>
<span id="cb77-10"><a href="example-2.html#cb77-10" aria-hidden="true" tabindex="-1"></a>img_main_filtered_rfe <span class="ot">&lt;-</span> <span class="fu">rfe</span>(</span>
<span id="cb77-11"><a href="example-2.html#cb77-11" aria-hidden="true" tabindex="-1"></a>  img_main_filtered_recipe,</span>
<span id="cb77-12"><a href="example-2.html#cb77-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> image_train,</span>
<span id="cb77-13"><a href="example-2.html#cb77-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">sizes =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">19</span>,</span>
<span id="cb77-14"><a href="example-2.html#cb77-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">rfeControl =</span> rfeCtrl,</span>
<span id="cb77-15"><a href="example-2.html#cb77-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="st">&quot;ROC&quot;</span>,</span>
<span id="cb77-16"><a href="example-2.html#cb77-16" aria-hidden="true" tabindex="-1"></a>  <span class="do">## train options</span></span>
<span id="cb77-17"><a href="example-2.html#cb77-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb77-18"><a href="example-2.html#cb77-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">trControl =</span> internal_ctrl</span>
<span id="cb77-19"><a href="example-2.html#cb77-19" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="example-2.html#cb78-1" aria-hidden="true" tabindex="-1"></a>both_int_filtered_recipe <span class="ot">&lt;-</span></span>
<span id="cb78-2"><a href="example-2.html#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">recipe</span>(Stroke <span class="sc">~</span> ., <span class="at">data =</span> stroke_train) <span class="sc">%&gt;%</span></span>
<span id="cb78-3"><a href="example-2.html#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_interact</span>(int_form)  <span class="sc">%&gt;%</span></span>
<span id="cb78-4"><a href="example-2.html#cb78-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_corr</span>(<span class="fu">all_predictors</span>(), <span class="at">threshold =</span> <span class="fl">0.75</span>) <span class="sc">%&gt;%</span></span>
<span id="cb78-5"><a href="example-2.html#cb78-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_center</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb78-6"><a href="example-2.html#cb78-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_scale</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb78-7"><a href="example-2.html#cb78-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_YeoJohnson</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb78-8"><a href="example-2.html#cb78-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>())</span>
<span id="cb78-9"><a href="example-2.html#cb78-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-10"><a href="example-2.html#cb78-10" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">63331</span>)</span>
<span id="cb78-11"><a href="example-2.html#cb78-11" aria-hidden="true" tabindex="-1"></a>both_int_filtered_rfe <span class="ot">&lt;-</span> <span class="fu">rfe</span>(</span>
<span id="cb78-12"><a href="example-2.html#cb78-12" aria-hidden="true" tabindex="-1"></a>  both_int_filtered_recipe,</span>
<span id="cb78-13"><a href="example-2.html#cb78-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> stroke_train,</span>
<span id="cb78-14"><a href="example-2.html#cb78-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">sizes =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">44</span>,</span>
<span id="cb78-15"><a href="example-2.html#cb78-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">rfeControl =</span> rfeCtrl,</span>
<span id="cb78-16"><a href="example-2.html#cb78-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="st">&quot;ROC&quot;</span>,</span>
<span id="cb78-17"><a href="example-2.html#cb78-17" aria-hidden="true" tabindex="-1"></a>  <span class="do">## train options</span></span>
<span id="cb78-18"><a href="example-2.html#cb78-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb78-19"><a href="example-2.html#cb78-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">trControl =</span> internal_ctrl</span>
<span id="cb78-20"><a href="example-2.html#cb78-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb78-21"><a href="example-2.html#cb78-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-22"><a href="example-2.html#cb78-22" aria-hidden="true" tabindex="-1"></a>both_main_filtered_recipe <span class="ot">&lt;-</span></span>
<span id="cb78-23"><a href="example-2.html#cb78-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">recipe</span>(Stroke <span class="sc">~</span> ., <span class="at">data =</span> stroke_train)  <span class="sc">%&gt;%</span></span>
<span id="cb78-24"><a href="example-2.html#cb78-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_corr</span>(<span class="fu">all_predictors</span>(), <span class="at">threshold =</span> <span class="fl">0.75</span>) <span class="sc">%&gt;%</span></span>
<span id="cb78-25"><a href="example-2.html#cb78-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_center</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb78-26"><a href="example-2.html#cb78-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_scale</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb78-27"><a href="example-2.html#cb78-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_YeoJohnson</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb78-28"><a href="example-2.html#cb78-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>())</span>
<span id="cb78-29"><a href="example-2.html#cb78-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-30"><a href="example-2.html#cb78-30" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">63331</span>)</span>
<span id="cb78-31"><a href="example-2.html#cb78-31" aria-hidden="true" tabindex="-1"></a>both_main_filtered_rfe <span class="ot">&lt;-</span> <span class="fu">rfe</span>(</span>
<span id="cb78-32"><a href="example-2.html#cb78-32" aria-hidden="true" tabindex="-1"></a>  both_main_filtered_recipe,</span>
<span id="cb78-33"><a href="example-2.html#cb78-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> stroke_train,</span>
<span id="cb78-34"><a href="example-2.html#cb78-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">sizes =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">28</span>,</span>
<span id="cb78-35"><a href="example-2.html#cb78-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">rfeControl =</span> rfeCtrl,</span>
<span id="cb78-36"><a href="example-2.html#cb78-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="st">&quot;ROC&quot;</span>,</span>
<span id="cb78-37"><a href="example-2.html#cb78-37" aria-hidden="true" tabindex="-1"></a>  <span class="do">## train options</span></span>
<span id="cb78-38"><a href="example-2.html#cb78-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb78-39"><a href="example-2.html#cb78-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">trControl =</span> internal_ctrl</span>
<span id="cb78-40"><a href="example-2.html#cb78-40" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="example-2.html#cb79-1" aria-hidden="true" tabindex="-1"></a>risk_int_recipe <span class="ot">&lt;-</span></span>
<span id="cb79-2"><a href="example-2.html#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">recipe</span>(Stroke <span class="sc">~</span> ., <span class="at">data =</span> risk_train) <span class="sc">%&gt;%</span></span>
<span id="cb79-3"><a href="example-2.html#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_interact</span>(<span class="sc">~</span> <span class="fu">all_predictors</span>()<span class="sc">:</span><span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb79-4"><a href="example-2.html#cb79-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_center</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb79-5"><a href="example-2.html#cb79-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_scale</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb79-6"><a href="example-2.html#cb79-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>())</span>
<span id="cb79-7"><a href="example-2.html#cb79-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-8"><a href="example-2.html#cb79-8" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">63331</span>)</span>
<span id="cb79-9"><a href="example-2.html#cb79-9" aria-hidden="true" tabindex="-1"></a>risk_int_rfe <span class="ot">&lt;-</span> <span class="fu">rfe</span>(</span>
<span id="cb79-10"><a href="example-2.html#cb79-10" aria-hidden="true" tabindex="-1"></a>  risk_int_recipe,</span>
<span id="cb79-11"><a href="example-2.html#cb79-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> risk_train,</span>
<span id="cb79-12"><a href="example-2.html#cb79-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">sizes =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">36</span>,</span>
<span id="cb79-13"><a href="example-2.html#cb79-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">rfeControl =</span> rfeCtrl,</span>
<span id="cb79-14"><a href="example-2.html#cb79-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="st">&quot;ROC&quot;</span>,</span>
<span id="cb79-15"><a href="example-2.html#cb79-15" aria-hidden="true" tabindex="-1"></a>  <span class="do">## train options</span></span>
<span id="cb79-16"><a href="example-2.html#cb79-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb79-17"><a href="example-2.html#cb79-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">trControl =</span> internal_ctrl</span>
<span id="cb79-18"><a href="example-2.html#cb79-18" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="example-2.html#cb80-1" aria-hidden="true" tabindex="-1"></a>risk_main_recipe <span class="ot">&lt;-</span></span>
<span id="cb80-2"><a href="example-2.html#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">recipe</span>(Stroke <span class="sc">~</span> ., <span class="at">data =</span> risk_train) <span class="sc">%&gt;%</span></span>
<span id="cb80-3"><a href="example-2.html#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_center</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb80-4"><a href="example-2.html#cb80-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_scale</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb80-5"><a href="example-2.html#cb80-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>())</span>
<span id="cb80-6"><a href="example-2.html#cb80-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-7"><a href="example-2.html#cb80-7" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">63331</span>)</span>
<span id="cb80-8"><a href="example-2.html#cb80-8" aria-hidden="true" tabindex="-1"></a>risk_main_rfe <span class="ot">&lt;-</span> <span class="fu">rfe</span>(</span>
<span id="cb80-9"><a href="example-2.html#cb80-9" aria-hidden="true" tabindex="-1"></a>  risk_main_recipe,</span>
<span id="cb80-10"><a href="example-2.html#cb80-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> risk_train,</span>
<span id="cb80-11"><a href="example-2.html#cb80-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">sizes =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>,</span>
<span id="cb80-12"><a href="example-2.html#cb80-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">rfeControl =</span> rfeCtrl,</span>
<span id="cb80-13"><a href="example-2.html#cb80-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="st">&quot;ROC&quot;</span>,</span>
<span id="cb80-14"><a href="example-2.html#cb80-14" aria-hidden="true" tabindex="-1"></a>  <span class="do">## train options</span></span>
<span id="cb80-15"><a href="example-2.html#cb80-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb80-16"><a href="example-2.html#cb80-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">trControl =</span> internal_ctrl</span>
<span id="cb80-17"><a href="example-2.html#cb80-17" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="example-2.html#cb81-1" aria-hidden="true" tabindex="-1"></a>img_int_recipe <span class="ot">&lt;-</span></span>
<span id="cb81-2"><a href="example-2.html#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">recipe</span>(Stroke <span class="sc">~</span> ., <span class="at">data =</span> image_train) <span class="sc">%&gt;%</span></span>
<span id="cb81-3"><a href="example-2.html#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_interact</span>(int_form)  <span class="sc">%&gt;%</span></span>
<span id="cb81-4"><a href="example-2.html#cb81-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_center</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb81-5"><a href="example-2.html#cb81-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_scale</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb81-6"><a href="example-2.html#cb81-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_YeoJohnson</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb81-7"><a href="example-2.html#cb81-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>())</span>
<span id="cb81-8"><a href="example-2.html#cb81-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-9"><a href="example-2.html#cb81-9" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">63331</span>)</span>
<span id="cb81-10"><a href="example-2.html#cb81-10" aria-hidden="true" tabindex="-1"></a>img_int_rfe <span class="ot">&lt;-</span> <span class="fu">rfe</span>(</span>
<span id="cb81-11"><a href="example-2.html#cb81-11" aria-hidden="true" tabindex="-1"></a>  img_int_recipe,</span>
<span id="cb81-12"><a href="example-2.html#cb81-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> image_train,</span>
<span id="cb81-13"><a href="example-2.html#cb81-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">sizes =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">35</span>,</span>
<span id="cb81-14"><a href="example-2.html#cb81-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">rfeControl =</span> rfeCtrl,</span>
<span id="cb81-15"><a href="example-2.html#cb81-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="st">&quot;ROC&quot;</span>,</span>
<span id="cb81-16"><a href="example-2.html#cb81-16" aria-hidden="true" tabindex="-1"></a>  <span class="do">## train options</span></span>
<span id="cb81-17"><a href="example-2.html#cb81-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb81-18"><a href="example-2.html#cb81-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">trControl =</span> internal_ctrl</span>
<span id="cb81-19"><a href="example-2.html#cb81-19" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="example-2.html#cb82-1" aria-hidden="true" tabindex="-1"></a>img_main_recipe <span class="ot">&lt;-</span></span>
<span id="cb82-2"><a href="example-2.html#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">recipe</span>(Stroke <span class="sc">~</span> ., <span class="at">data =</span> image_train)  <span class="sc">%&gt;%</span></span>
<span id="cb82-3"><a href="example-2.html#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_center</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb82-4"><a href="example-2.html#cb82-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_scale</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb82-5"><a href="example-2.html#cb82-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_YeoJohnson</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb82-6"><a href="example-2.html#cb82-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>())</span>
<span id="cb82-7"><a href="example-2.html#cb82-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-8"><a href="example-2.html#cb82-8" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">63331</span>)</span>
<span id="cb82-9"><a href="example-2.html#cb82-9" aria-hidden="true" tabindex="-1"></a>img_main_rfe <span class="ot">&lt;-</span> <span class="fu">rfe</span>(</span>
<span id="cb82-10"><a href="example-2.html#cb82-10" aria-hidden="true" tabindex="-1"></a>  img_main_recipe,</span>
<span id="cb82-11"><a href="example-2.html#cb82-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> image_train,</span>
<span id="cb82-12"><a href="example-2.html#cb82-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">sizes =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">19</span>,</span>
<span id="cb82-13"><a href="example-2.html#cb82-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">rfeControl =</span> rfeCtrl,</span>
<span id="cb82-14"><a href="example-2.html#cb82-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="st">&quot;ROC&quot;</span>,</span>
<span id="cb82-15"><a href="example-2.html#cb82-15" aria-hidden="true" tabindex="-1"></a>  <span class="do">## train options</span></span>
<span id="cb82-16"><a href="example-2.html#cb82-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb82-17"><a href="example-2.html#cb82-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">trControl =</span> internal_ctrl</span>
<span id="cb82-18"><a href="example-2.html#cb82-18" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="example-2.html#cb83-1" aria-hidden="true" tabindex="-1"></a>both_int_recipe <span class="ot">&lt;-</span></span>
<span id="cb83-2"><a href="example-2.html#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">recipe</span>(Stroke <span class="sc">~</span> ., <span class="at">data =</span> stroke_train) <span class="sc">%&gt;%</span></span>
<span id="cb83-3"><a href="example-2.html#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_interact</span>(int_form)  <span class="sc">%&gt;%</span></span>
<span id="cb83-4"><a href="example-2.html#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_center</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb83-5"><a href="example-2.html#cb83-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_scale</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb83-6"><a href="example-2.html#cb83-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_YeoJohnson</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb83-7"><a href="example-2.html#cb83-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>())</span>
<span id="cb83-8"><a href="example-2.html#cb83-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-9"><a href="example-2.html#cb83-9" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">63331</span>)</span>
<span id="cb83-10"><a href="example-2.html#cb83-10" aria-hidden="true" tabindex="-1"></a>both_int_rfe <span class="ot">&lt;-</span> <span class="fu">rfe</span>(</span>
<span id="cb83-11"><a href="example-2.html#cb83-11" aria-hidden="true" tabindex="-1"></a>  both_int_recipe,</span>
<span id="cb83-12"><a href="example-2.html#cb83-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> stroke_train,</span>
<span id="cb83-13"><a href="example-2.html#cb83-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">sizes =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">44</span>,</span>
<span id="cb83-14"><a href="example-2.html#cb83-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">rfeControl =</span> rfeCtrl,</span>
<span id="cb83-15"><a href="example-2.html#cb83-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="st">&quot;ROC&quot;</span>,</span>
<span id="cb83-16"><a href="example-2.html#cb83-16" aria-hidden="true" tabindex="-1"></a>  <span class="do">## train options</span></span>
<span id="cb83-17"><a href="example-2.html#cb83-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb83-18"><a href="example-2.html#cb83-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">trControl =</span> internal_ctrl</span>
<span id="cb83-19"><a href="example-2.html#cb83-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb83-20"><a href="example-2.html#cb83-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-21"><a href="example-2.html#cb83-21" aria-hidden="true" tabindex="-1"></a>both_main_recipe <span class="ot">&lt;-</span></span>
<span id="cb83-22"><a href="example-2.html#cb83-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">recipe</span>(Stroke <span class="sc">~</span> ., <span class="at">data =</span> stroke_train)  <span class="sc">%&gt;%</span></span>
<span id="cb83-23"><a href="example-2.html#cb83-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_center</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb83-24"><a href="example-2.html#cb83-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_scale</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb83-25"><a href="example-2.html#cb83-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_YeoJohnson</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb83-26"><a href="example-2.html#cb83-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>())</span>
<span id="cb83-27"><a href="example-2.html#cb83-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-28"><a href="example-2.html#cb83-28" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">63331</span>)</span>
<span id="cb83-29"><a href="example-2.html#cb83-29" aria-hidden="true" tabindex="-1"></a>both_main_rfe <span class="ot">&lt;-</span> <span class="fu">rfe</span>(</span>
<span id="cb83-30"><a href="example-2.html#cb83-30" aria-hidden="true" tabindex="-1"></a>  both_main_recipe,</span>
<span id="cb83-31"><a href="example-2.html#cb83-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> stroke_train,</span>
<span id="cb83-32"><a href="example-2.html#cb83-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">sizes =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">28</span>,</span>
<span id="cb83-33"><a href="example-2.html#cb83-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">rfeControl =</span> rfeCtrl,</span>
<span id="cb83-34"><a href="example-2.html#cb83-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="st">&quot;ROC&quot;</span>,</span>
<span id="cb83-35"><a href="example-2.html#cb83-35" aria-hidden="true" tabindex="-1"></a>  <span class="do">## train options</span></span>
<span id="cb83-36"><a href="example-2.html#cb83-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">&quot;glm&quot;</span>,</span>
<span id="cb83-37"><a href="example-2.html#cb83-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">trControl =</span> internal_ctrl</span>
<span id="cb83-38"><a href="example-2.html#cb83-38" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="example-2.html#cb84-1" aria-hidden="true" tabindex="-1"></a>format_data <span class="ot">&lt;-</span> <span class="cf">function</span>(x, lab, <span class="at">int =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb84-2"><a href="example-2.html#cb84-2" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> </span>
<span id="cb84-3"><a href="example-2.html#cb84-3" aria-hidden="true" tabindex="-1"></a>    x <span class="sc">%&gt;%</span> </span>
<span id="cb84-4"><a href="example-2.html#cb84-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pluck</span>(<span class="st">&quot;results&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb84-5"><a href="example-2.html#cb84-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Predictors =</span> <span class="sc">!!</span>lab) <span class="sc">%&gt;%</span> </span>
<span id="cb84-6"><a href="example-2.html#cb84-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(ROC, Variables, Predictors, Variables, Num_Resamples) <span class="sc">%&gt;%</span> </span>
<span id="cb84-7"><a href="example-2.html#cb84-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Model =</span> <span class="st">&quot;Main Effects&quot;</span>)</span>
<span id="cb84-8"><a href="example-2.html#cb84-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (int)</span>
<span id="cb84-9"><a href="example-2.html#cb84-9" aria-hidden="true" tabindex="-1"></a>    dat<span class="sc">$</span>Model <span class="ot">&lt;-</span> <span class="st">&quot;Interactions&quot;</span></span>
<span id="cb84-10"><a href="example-2.html#cb84-10" aria-hidden="true" tabindex="-1"></a>  dat</span>
<span id="cb84-11"><a href="example-2.html#cb84-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb84-12"><a href="example-2.html#cb84-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb84-13"><a href="example-2.html#cb84-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-14"><a href="example-2.html#cb84-14" aria-hidden="true" tabindex="-1"></a>filtered_dat <span class="ot">&lt;-</span> </span>
<span id="cb84-15"><a href="example-2.html#cb84-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(</span>
<span id="cb84-16"><a href="example-2.html#cb84-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">format_data</span>(risk_main_filtered_rfe, <span class="at">lab =</span> <span class="st">&quot;Risk Predictors&quot;</span>),</span>
<span id="cb84-17"><a href="example-2.html#cb84-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">format_data</span>(risk_int_filtered_rfe, <span class="at">lab =</span> <span class="st">&quot;Risk Predictors&quot;</span>, <span class="cn">TRUE</span>),</span>
<span id="cb84-18"><a href="example-2.html#cb84-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">format_data</span>(img_main_filtered_rfe, <span class="at">lab =</span> <span class="st">&quot;Imaging Predictors&quot;</span>),</span>
<span id="cb84-19"><a href="example-2.html#cb84-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">format_data</span>(img_int_filtered_rfe, <span class="at">lab =</span> <span class="st">&quot;Imaging Predictors&quot;</span>, <span class="cn">TRUE</span>),</span>
<span id="cb84-20"><a href="example-2.html#cb84-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">format_data</span>(both_main_filtered_rfe, <span class="at">lab =</span> <span class="st">&quot;All Predictors&quot;</span>),</span>
<span id="cb84-21"><a href="example-2.html#cb84-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">format_data</span>(both_int_filtered_rfe, <span class="at">lab =</span> <span class="st">&quot;All Predictors&quot;</span>, <span class="cn">TRUE</span>)</span>
<span id="cb84-22"><a href="example-2.html#cb84-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb84-23"><a href="example-2.html#cb84-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb84-24"><a href="example-2.html#cb84-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">Predictors =</span> <span class="fu">factor</span>(</span>
<span id="cb84-25"><a href="example-2.html#cb84-25" aria-hidden="true" tabindex="-1"></a>      Predictors, </span>
<span id="cb84-26"><a href="example-2.html#cb84-26" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Risk Predictors&quot;</span>, <span class="st">&quot;Imaging Predictors&quot;</span>, <span class="st">&quot;All Predictors&quot;</span>)</span>
<span id="cb84-27"><a href="example-2.html#cb84-27" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb84-28"><a href="example-2.html#cb84-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">Model =</span> <span class="fu">factor</span>(Model, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Main Effects&quot;</span>, <span class="st">&quot;Interactions&quot;</span>)),</span>
<span id="cb84-29"><a href="example-2.html#cb84-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">Filtering =</span> <span class="st">&quot;Correlation Filter&quot;</span></span>
<span id="cb84-30"><a href="example-2.html#cb84-30" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb84-31"><a href="example-2.html#cb84-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-32"><a href="example-2.html#cb84-32" aria-hidden="true" tabindex="-1"></a>unfiltered_dat <span class="ot">&lt;-</span> </span>
<span id="cb84-33"><a href="example-2.html#cb84-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(</span>
<span id="cb84-34"><a href="example-2.html#cb84-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">format_data</span>(risk_main_rfe, <span class="at">lab =</span> <span class="st">&quot;Risk Predictors&quot;</span>),</span>
<span id="cb84-35"><a href="example-2.html#cb84-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">format_data</span>(risk_int_rfe, <span class="at">lab =</span> <span class="st">&quot;Risk Predictors&quot;</span>, <span class="cn">TRUE</span>),</span>
<span id="cb84-36"><a href="example-2.html#cb84-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">format_data</span>(img_main_rfe, <span class="at">lab =</span> <span class="st">&quot;Imaging Predictors&quot;</span>),</span>
<span id="cb84-37"><a href="example-2.html#cb84-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">format_data</span>(img_int_rfe, <span class="at">lab =</span> <span class="st">&quot;Imaging Predictors&quot;</span>, <span class="cn">TRUE</span>),</span>
<span id="cb84-38"><a href="example-2.html#cb84-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">format_data</span>(both_main_rfe, <span class="at">lab =</span> <span class="st">&quot;All Predictors&quot;</span>),</span>
<span id="cb84-39"><a href="example-2.html#cb84-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">format_data</span>(both_int_rfe, <span class="at">lab =</span> <span class="st">&quot;All Predictors&quot;</span>, <span class="cn">TRUE</span>)</span>
<span id="cb84-40"><a href="example-2.html#cb84-40" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb84-41"><a href="example-2.html#cb84-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb84-42"><a href="example-2.html#cb84-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">Predictors =</span> <span class="fu">factor</span>(</span>
<span id="cb84-43"><a href="example-2.html#cb84-43" aria-hidden="true" tabindex="-1"></a>      Predictors, </span>
<span id="cb84-44"><a href="example-2.html#cb84-44" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Risk Predictors&quot;</span>, <span class="st">&quot;Imaging Predictors&quot;</span>, <span class="st">&quot;All Predictors&quot;</span>)</span>
<span id="cb84-45"><a href="example-2.html#cb84-45" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb84-46"><a href="example-2.html#cb84-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">Model =</span> <span class="fu">factor</span>(Model, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Main Effects&quot;</span>, <span class="st">&quot;Interactions&quot;</span>)),</span>
<span id="cb84-47"><a href="example-2.html#cb84-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">Filtering =</span> <span class="st">&quot;No Filter&quot;</span></span>
<span id="cb84-48"><a href="example-2.html#cb84-48" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb84-49"><a href="example-2.html#cb84-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-50"><a href="example-2.html#cb84-50" aria-hidden="true" tabindex="-1"></a>rfe_data <span class="ot">&lt;-</span> </span>
<span id="cb84-51"><a href="example-2.html#cb84-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(filtered_dat, unfiltered_dat) <span class="sc">%&gt;%</span> </span>
<span id="cb84-52"><a href="example-2.html#cb84-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb84-53"><a href="example-2.html#cb84-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">Filtering =</span> <span class="fu">factor</span>(Filtering, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;No Filter&quot;</span>, <span class="st">&quot;Correlation Filter&quot;</span>))</span>
<span id="cb84-54"><a href="example-2.html#cb84-54" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="example-2.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># https://bookdown.org/max/FES/predictive-modeling-across-sets.html#fig:stroke-rfe-res</span></span>
<span id="cb85-2"><a href="example-2.html#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(rfe_data, <span class="fu">aes</span>(<span class="at">x =</span> Variables, <span class="at">y =</span> ROC, <span class="at">col =</span> Model)) <span class="sc">+</span></span>
<span id="cb85-3"><a href="example-2.html#cb85-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.75</span>) <span class="sc">+</span> </span>
<span id="cb85-4"><a href="example-2.html#cb85-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb85-5"><a href="example-2.html#cb85-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(Filtering <span class="sc">~</span> Predictors) <span class="sc">+</span> </span>
<span id="cb85-6"><a href="example-2.html#cb85-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#6A3D9A&quot;</span>, <span class="st">&quot;#CAB2D6&quot;</span>))</span></code></pre></div>
<p><img src="bookclub-feat_eng_files/figure-html/02-illustrative-example-predicting-risk-of-ischemic-stroke-52-1.png" width="672" /></p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="example-2.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># https://bookdown.org/max/FES/predictive-modeling-across-sets.html#tab:stroke-rfe-tab</span></span>
<span id="cb86-2"><a href="example-2.html#cb86-2" aria-hidden="true" tabindex="-1"></a>rfe_tab <span class="ot">&lt;-</span></span>
<span id="cb86-3"><a href="example-2.html#cb86-3" aria-hidden="true" tabindex="-1"></a>  img_main_filtered_rfe <span class="sc">%&gt;%</span> </span>
<span id="cb86-4"><a href="example-2.html#cb86-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pluck</span>(<span class="st">&quot;variables&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb86-5"><a href="example-2.html#cb86-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Variables <span class="sc">==</span> img_main_filtered_rfe<span class="sc">$</span>optsize) <span class="sc">%&gt;%</span> </span>
<span id="cb86-6"><a href="example-2.html#cb86-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(var) <span class="sc">%&gt;%</span> </span>
<span id="cb86-7"><a href="example-2.html#cb86-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb86-8"><a href="example-2.html#cb86-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb86-9"><a href="example-2.html#cb86-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">final =</span> <span class="fu">ifelse</span>(var <span class="sc">%in%</span> img_main_filtered_rfe<span class="sc">$</span>optVariables, <span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb86-10"><a href="example-2.html#cb86-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
<p>Meeting Videos</p>
</div>
<div id="cohort-1-1" class="section level3 hasAnchor" number="2.3.4">
<h3><span class="header-section-number">2.3.4</span> Cohort 1<a href="example-2.html#cohort-1-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<iframe src="https://www.youtube.com/embed/URL" width="100%" height="400px" data-external="1">
</iframe>
<details>
<summary>
Meeting chat log
</summary>
<pre><code>LOG</code></pre>
</details>

</div>
</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="example-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="a-review-of-the-predictive-modeling-process.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/r4ds/bookclub-feat_eng/edit/main/02-illustrative_example_predicting_risk_of_ischemic_stroke.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
